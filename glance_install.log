+ cd /root/work/glance_service
+ firewall-cmd --add-port=9292/tcp --permanent
success
+ firewall-cmd --reload
success
+ mysql -u root -pSuper123
+ . admin-openrc
++ export OS_PROJECT_DOMAIN_NAME=default
++ OS_PROJECT_DOMAIN_NAME=default
++ export OS_USER_DOMAIN_NAME=default
++ OS_USER_DOMAIN_NAME=default
++ export OS_PROJECT_NAME=admin
++ OS_PROJECT_NAME=admin
++ export OS_USERNAME=admin
++ OS_USERNAME=admin
++ export OS_PASSWORD=Super123
++ OS_PASSWORD=Super123
++ export OS_AUTH_URL=http://controller:35357/v3
++ OS_AUTH_URL=http://controller:35357/v3
++ export OS_IDENTITY_API_VERSION=3
++ OS_IDENTITY_API_VERSION=3
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
+ yum -y install expect
+ openstack user create --domain default --password Super123 glance
+-----------+----------------------------------+
| Field     | Value                            |
+-----------+----------------------------------+
| domain_id | 05fedb7006534e68b1f4de0c66110989 |
| enabled   | True                             |
| id        | 683a61e63103409aad08665390f33d18 |
| name      | glance                           |
+-----------+----------------------------------+
+ openstack role add --project service --user glance admin
+ openstack service create --name glance --description 'OpenStack Image service' image
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | OpenStack Image service          |
| enabled     | True                             |
| id          | 492afc2475b8461d8b5ae2b6a68689fd |
| name        | glance                           |
| type        | image                            |
+-------------+----------------------------------+
+ openstack endpoint create --region RegionOne image public http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | ce38d55e737b44f9b25125504c0e0139 |
| interface    | public                           |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 492afc2475b8461d8b5ae2b6a68689fd |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+
+ openstack endpoint create --region RegionOne image internal http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | d9b07689469e45b99671119dbe0e6b5f |
| interface    | internal                         |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 492afc2475b8461d8b5ae2b6a68689fd |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+
+ openstack endpoint create --region RegionOne image admin http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | cca31322b6a3434d88207eafbc669365 |
| interface    | admin                            |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 492afc2475b8461d8b5ae2b6a68689fd |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+
+ echo 'installing glance package on controller'
installing glance package on controller
+ yum -y install openstack-glance wget
+ openstack-config --set /etc/glance/glance-api.conf database connection mysql+pymysql://glance:Super123@controller/glance
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_uri http://controller:5000
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_url http://controller:35357
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken memcached_servers controller:11211
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_type password
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken project_domain_name default
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken user_domain_name default
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken project_name service
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken username glance
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken password Super123
+ openstack-config --set /etc/glance/glance-api.conf paste_deploy flavor keystone
+ openstack-config --set /etc/glance/glance-api.conf glance_store default_store file
+ openstack-config --set /etc/glance/glance-api.conf glance_store store file,http
+ openstack-config --set /etc/glance/glance-api.conf glance_store filesystem_store_datadir /var/lib/glance/images/
+ openstack-config --set /etc/glance/glance-api.conf DEFAULT verbose True
+ openstack-config --set /etc/glance/glance-registry.conf database connection mysql+pymysql://glance:Super123@controller/glance
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_uri http://controller:5000
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_url http://controller:35357
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken memcached_servers controller:11211
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_type password
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken project_domain_name default
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken user_domain_name default
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken project_name service
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken username glance
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken password Super123
+ openstack-config --set /etc/glance/glance-registry.conf paste_deploy flavor keystone
+ openstack-config --set /etc/glance/glance-registry.conf DEFAULT verbose True
+ su -s /bin/sh -c 'glance-manage db_sync' glance
Option "verbose" from group "DEFAULT" is deprecated for removal.  Its value may be silently ignored in the future.
/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py:1056: OsloDBDeprecationWarning: EngineFacade is deprecated; please use oslo_db.sqlalchemy.enginefacade
  expire_on_commit=expire_on_commit, _conf=conf)
/usr/lib/python2.7/site-packages/pymysql/cursors.py:146: Warning: Duplicate index 'ix_image_properties_image_id_name' defined on the table 'glance.image_properties'. This is deprecated and will be disallowed in a future release.
  result = self._query(query)
+ systemctl enable openstack-glance-api.service openstack-glance-registry.service
Created symlink from /etc/systemd/system/multi-user.target.wants/openstack-glance-api.service to /usr/lib/systemd/system/openstack-glance-api.service.
Created symlink from /etc/systemd/system/multi-user.target.wants/openstack-glance-registry.service to /usr/lib/systemd/system/openstack-glance-registry.service.
+ systemctl start openstack-glance-api.service openstack-glance-registry.service
+ wget http://download.cirros-cloud.net/0.3.4/cirros-0.3.4-x86_64-disk.img
--2016-04-30 01:24:37--  http://download.cirros-cloud.net/0.3.4/cirros-0.3.4-x86_64-disk.img
Resolving download.cirros-cloud.net (download.cirros-cloud.net)... 64.90.42.85
Connecting to download.cirros-cloud.net (download.cirros-cloud.net)|64.90.42.85|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 13287936 (13M) [text/plain]
Saving to: ‘cirros-0.3.4-x86_64-disk.img’

     0K .......... .......... .......... .......... ..........  0%  460K 28s
    50K .......... .......... .......... .......... ..........  0%  478K 27s
   100K .......... .......... .......... .......... ..........  1%  781K 24s
   150K .......... .......... .......... .......... ..........  1% 1.16M 20s
   200K .......... .......... .......... .......... ..........  1%  619K 20s
   250K .......... .......... .......... .......... ..........  2% 1.24M 19s
   300K .......... .......... .......... .......... ..........  2%  709K 18s
   350K .......... .......... .......... .......... ..........  3% 1.30M 17s
   400K .......... .......... .......... .......... ..........  3% 1.32M 16s
   450K .......... .......... .......... .......... ..........  3% 1.36M 15s
   500K .......... .......... .......... .......... ..........  4% 1.41M 15s
   550K .......... .......... .......... .......... ..........  4%  978K 15s
   600K .......... .......... .......... .......... ..........  5% 6.53M 14s
   650K .......... .......... .......... .......... ..........  5% 1.18M 13s
   700K .......... .......... .......... .......... ..........  5% 1.44M 13s
   750K .......... .......... .......... .......... ..........  6% 1.60M 12s
   800K .......... .......... .......... .......... ..........  6% 1.40M 12s
   850K .......... .......... .......... .......... ..........  6% 3.67M 12s
   900K .......... .......... .......... .......... ..........  7% 1.30M 11s
   950K .......... .......... .......... .......... ..........  7% 1.68M 11s
  1000K .......... .......... .......... .......... ..........  8% 4.42M 11s
  1050K .......... .......... .......... .......... ..........  8% 1.40M 11s
  1100K .......... .......... .......... .......... ..........  8% 1.11M 11s
  1150K .......... .......... .......... .......... ..........  9% 10.0M 10s
  1200K .......... .......... .......... .......... ..........  9% 1.23M 10s
  1250K .......... .......... .......... .......... .......... 10% 2.99M 10s
  1300K .......... .......... .......... .......... .......... 10% 1.06M 10s
  1350K .......... .......... .......... .......... .......... 10% 2.68M 10s
  1400K .......... .......... .......... .......... .......... 11% 1.25M 9s
  1450K .......... .......... .......... .......... .......... 11% 1.23M 9s
  1500K .......... .......... .......... .......... .......... 11% 7.33M 9s
  1550K .......... .......... .......... .......... .......... 12% 1.23M 9s
  1600K .......... .......... .......... .......... .......... 12% 11.1M 9s
  1650K .......... .......... .......... .......... .......... 13% 1.05M 9s
  1700K .......... .......... .......... .......... .......... 13% 9.33M 9s
  1750K .......... .......... .......... .......... .......... 13% 1.20M 9s
  1800K .......... .......... .......... .......... .......... 14% 3.68M 8s
  1850K .......... .......... .......... .......... .......... 14% 1.44M 8s
  1900K .......... .......... .......... .......... .......... 15% 1.52M 8s
  1950K .......... .......... .......... .......... .......... 15% 3.02M 8s
  2000K .......... .......... .......... .......... .......... 15% 2.75M 8s
  2050K .......... .......... .......... .......... .......... 16% 1.99M 8s
  2100K .......... .......... .......... .......... .......... 16% 11.0M 8s
  2150K .......... .......... .......... .......... .......... 16% 3.19M 7s
  2200K .......... .......... .......... .......... .......... 17% 2.14M 7s
  2250K .......... .......... .......... .......... .......... 17% 1.99M 7s
  2300K .......... .......... .......... .......... .......... 18% 2.83M 7s
  2350K .......... .......... .......... .......... .......... 18% 2.52M 7s
  2400K .......... .......... .......... .......... .......... 18% 5.55M 7s
  2450K .......... .......... .......... .......... .......... 19% 3.34M 7s
  2500K .......... .......... .......... .......... .......... 19% 2.83M 7s
  2550K .......... .......... .......... .......... .......... 20% 1.96M 7s
  2600K .......... .......... .......... .......... .......... 20% 2.94M 7s
  2650K .......... .......... .......... .......... .......... 20% 3.98M 7s
  2700K .......... .......... .......... .......... .......... 21%  732K 7s
  2750K .......... .......... .......... .......... .......... 21% 13.2M 6s
  2800K .......... .......... .......... .......... .......... 21% 1.63M 6s
  2850K .......... .......... .......... .......... .......... 22% 5.05M 6s
  2900K .......... .......... .......... .......... .......... 22% 7.77M 6s
  2950K .......... .......... .......... .......... .......... 23% 2.07M 6s
  3000K .......... .......... .......... .......... .......... 23% 4.40M 6s
  3050K .......... .......... .......... .......... .......... 23% 2.20M 6s
  3100K .......... .......... .......... .......... .......... 24% 1.97M 6s
  3150K .......... .......... .......... .......... .......... 24% 5.51M 6s
  3200K .......... .......... .......... .......... .......... 25% 1005K 6s
  3250K .......... .......... .......... .......... .......... 25% 3.51M 6s
  3300K .......... .......... .......... .......... .......... 25% 7.08M 6s
  3350K .......... .......... .......... .......... .......... 26% 1.30M 6s
  3400K .......... .......... .......... .......... .......... 26% 7.37M 6s
  3450K .......... .......... .......... .......... .......... 26% 4.53M 6s
  3500K .......... .......... .......... .......... .......... 27% 1.75M 5s
  3550K .......... .......... .......... .......... .......... 27% 4.92M 5s
  3600K .......... .......... .......... .......... .......... 28%  692K 5s
  3650K .......... .......... .......... .......... .......... 28% 8.65M 5s
  3700K .......... .......... .......... .......... .......... 28% 9.52M 5s
  3750K .......... .......... .......... .......... .......... 29% 1.15M 5s
  3800K .......... .......... .......... .......... .......... 29% 2.78M 5s
  3850K .......... .......... .......... .......... .......... 30% 14.7M 5s
  3900K .......... .......... .......... .......... .......... 30% 1.51M 5s
  3950K .......... .......... .......... .......... .......... 30% 3.67M 5s
  4000K .......... .......... .......... .......... .......... 31% 11.2M 5s
  4050K .......... .......... .......... .......... .......... 31% 1.47M 5s
  4100K .......... .......... .......... .......... .......... 31% 9.59M 5s
  4150K .......... .......... .......... .......... .......... 32% 7.20M 5s
  4200K .......... .......... .......... .......... .......... 32%  730K 5s
  4250K .......... .......... .......... .......... .......... 33% 1.66M 5s
  4300K .......... .......... .......... .......... .......... 33% 6.73M 5s
  4350K .......... .......... .......... .......... .......... 33%  786K 5s
  4400K .......... .......... .......... .......... .......... 34% 2.83M 5s
  4450K .......... .......... .......... .......... .......... 34% 12.4M 5s
  4500K .......... .......... .......... .......... .......... 35% 4.58M 5s
  4550K .......... .......... .......... .......... .......... 35%  776K 5s
  4600K .......... .......... .......... .......... .......... 35% 4.20M 5s
  4650K .......... .......... .......... .......... .......... 36% 11.4M 5s
  4700K .......... .......... .......... .......... .......... 36% 1.34M 5s
  4750K .......... .......... .......... .......... .......... 36% 4.90M 5s
  4800K .......... .......... .......... .......... .......... 37% 7.45M 4s
  4850K .......... .......... .......... .......... .......... 37%  686K 4s
  4900K .......... .......... .......... .......... .......... 38% 6.40M 4s
  4950K .......... .......... .......... .......... .......... 38% 5.32M 4s
  5000K .......... .......... .......... .......... .......... 38% 5.48M 4s
  5050K .......... .......... .......... .......... .......... 39% 1.60M 4s
  5100K .......... .......... .......... .......... .......... 39% 7.62M 4s
  5150K .......... .......... .......... .......... .......... 40% 3.92M 4s
  5200K .......... .......... .......... .......... .......... 40% 1.35M 4s
  5250K .......... .......... .......... .......... .......... 40% 5.55M 4s
  5300K .......... .......... .......... .......... .......... 41% 4.72M 4s
  5350K .......... .......... .......... .......... .......... 41% 5.27M 4s
  5400K .......... .......... .......... .......... .......... 41% 1.57M 4s
  5450K .......... .......... .......... .......... .......... 42% 12.1M 4s
  5500K .......... .......... .......... .......... .......... 42% 1.10M 4s
  5550K .......... .......... .......... .......... .......... 43% 8.86M 4s
  5600K .......... .......... .......... .......... .......... 43% 6.03M 4s
  5650K .......... .......... .......... .......... .......... 43% 1.80M 4s
  5700K .......... .......... .......... .......... .......... 44% 3.35M 4s
  5750K .......... .......... .......... .......... .......... 44% 1.05M 4s
  5800K .......... .......... .......... .......... .......... 45% 1.56M 4s
  5850K .......... .......... .......... .......... .......... 45% 8.74M 4s
  5900K .......... .......... .......... .......... .......... 45% 1.10M 4s
  5950K .......... .......... .......... .......... .......... 46% 9.26M 4s
  6000K .......... .......... .......... .......... .......... 46% 6.63M 4s
  6050K .......... .......... .......... .......... .......... 47% 8.98M 4s
  6100K .......... .......... .......... .......... .......... 47% 1.71M 4s
  6150K .......... .......... .......... .......... .......... 47% 9.16M 3s
  6200K .......... .......... .......... .......... .......... 48% 4.01M 3s
  6250K .......... .......... .......... .......... .......... 48% 8.72M 3s
  6300K .......... .......... .......... .......... .......... 48% 2.14M 3s
  6350K .......... .......... .......... .......... .......... 49% 3.40M 3s
  6400K .......... .......... .......... .......... .......... 49% 7.56M 3s
  6450K .......... .......... .......... .......... .......... 50% 1.25M 3s
  6500K .......... .......... .......... .......... .......... 50% 8.85M 3s
  6550K .......... .......... .......... .......... .......... 50% 8.20M 3s
  6600K .......... .......... .......... .......... .......... 51% 3.78M 3s
  6650K .......... .......... .......... .......... .......... 51% 1.82M 3s
  6700K .......... .......... .......... .......... .......... 52% 10.3M 3s
  6750K .......... .......... .......... .......... .......... 52% 6.16M 3s
  6800K .......... .......... .......... .......... .......... 52% 5.94M 3s
  6850K .......... .......... .......... .......... .......... 53% 2.02M 3s
  6900K .......... .......... .......... .......... .......... 53% 6.53M 3s
  6950K .......... .......... .......... .......... .......... 53% 5.28M 3s
  7000K .......... .......... .......... .......... .......... 54% 10.5M 3s
  7050K .......... .......... .......... .......... .......... 54% 1.32M 3s
  7100K .......... .......... .......... .......... .......... 55% 5.09M 3s
  7150K .......... .......... .......... .......... .......... 55% 9.48M 3s
  7200K .......... .......... .......... .......... .......... 55% 8.12M 3s
  7250K .......... .......... .......... .......... .......... 56% 1.74M 3s
  7300K .......... .......... .......... .......... .......... 56% 4.16M 3s
  7350K .......... .......... .......... .......... .......... 57% 10.1M 3s
  7400K .......... .......... .......... .......... .......... 57% 3.71M 3s
  7450K .......... .......... .......... .......... .......... 57% 4.04M 3s
  7500K .......... .......... .......... .......... .......... 58% 3.90M 3s
  7550K .......... .......... .......... .......... .......... 58% 3.43M 3s
  7600K .......... .......... .......... .......... .......... 58% 7.87M 2s
  7650K .......... .......... .......... .......... .......... 59% 2.01M 2s
  7700K .......... .......... .......... .......... .......... 59% 9.18M 2s
  7750K .......... .......... .......... .......... .......... 60% 3.25M 2s
  7800K .......... .......... .......... .......... .......... 60% 7.73M 2s
  7850K .......... .......... .......... .......... .......... 60% 2.47M 2s
  7900K .......... .......... .......... .......... .......... 61% 6.67M 2s
  7950K .......... .......... .......... .......... .......... 61% 3.59M 2s
  8000K .......... .......... .......... .......... .......... 62% 4.03M 2s
  8050K .......... .......... .......... .......... .......... 62% 1.90M 2s
  8100K .......... .......... .......... .......... .......... 62% 3.43M 2s
  8150K .......... .......... .......... .......... .......... 63% 3.61M 2s
  8200K .......... .......... .......... .......... .......... 63% 4.54M 2s
  8250K .......... .......... .......... .......... .......... 63% 3.78M 2s
  8300K .......... .......... .......... .......... .......... 64% 5.94M 2s
  8350K .......... .......... .......... .......... .......... 64% 3.79M 2s
  8400K .......... .......... .......... .......... .......... 65% 9.76M 2s
  8450K .......... .......... .......... .......... .......... 65% 4.05M 2s
  8500K .......... .......... .......... .......... .......... 65% 3.61M 2s
  8550K .......... .......... .......... .......... .......... 66% 3.04M 2s
  8600K .......... .......... .......... .......... .......... 66% 4.88M 2s
  8650K .......... .......... .......... .......... .......... 67% 4.99M 2s
  8700K .......... .......... .......... .......... .......... 67% 7.16M 2s
  8750K .......... .......... .......... .......... .......... 67% 2.59M 2s
  8800K .......... .......... .......... .......... .......... 68% 5.20M 2s
  8850K .......... .......... .......... .......... .......... 68% 7.11M 2s
  8900K .......... .......... .......... .......... .......... 68% 1.23M 2s
  8950K .......... .......... .......... .......... .......... 69% 12.4M 2s
  9000K .......... .......... .......... .......... .......... 69% 3.41M 2s
  9050K .......... .......... .......... .......... .......... 70% 7.75M 2s
  9100K .......... .......... .......... .......... .......... 70% 4.44M 2s
  9150K .......... .......... .......... .......... .......... 70% 1.98M 2s
  9200K .......... .......... .......... .......... .......... 71% 9.22M 2s
  9250K .......... .......... .......... .......... .......... 71% 6.11M 2s
  9300K .......... .......... .......... .......... .......... 72% 4.78M 2s
  9350K .......... .......... .......... .......... .......... 72% 3.12M 2s
  9400K .......... .......... .......... .......... .......... 72% 6.85M 1s
  9450K .......... .......... .......... .......... .......... 73% 3.56M 1s
  9500K .......... .......... .......... .......... .......... 73% 5.77M 1s
  9550K .......... .......... .......... .......... .......... 73% 6.27M 1s
  9600K .......... .......... .......... .......... .......... 74% 1.99M 1s
  9650K .......... .......... .......... .......... .......... 74% 5.73M 1s
  9700K .......... .......... .......... .......... .......... 75% 6.43M 1s
  9750K .......... .......... .......... .......... .......... 75% 6.85M 1s
  9800K .......... .......... .......... .......... .......... 75% 1.35M 1s
  9850K .......... .......... .......... .......... .......... 76% 5.57M 1s
  9900K .......... .......... .......... .......... .......... 76% 4.11M 1s
  9950K .......... .......... .......... .......... .......... 77% 4.65M 1s
 10000K .......... .......... .......... .......... .......... 77% 7.80M 1s
 10050K .......... .......... .......... .......... .......... 77% 1.42M 1s
 10100K .......... .......... .......... .......... .......... 78% 9.02M 1s
 10150K .......... .......... .......... .......... .......... 78% 4.70M 1s
 10200K .......... .......... .......... .......... .......... 78% 8.36M 1s
 10250K .......... .......... .......... .......... .......... 79% 2.03M 1s
 10300K .......... .......... .......... .......... .......... 79% 6.64M 1s
 10350K .......... .......... .......... .......... .......... 80% 4.59M 1s
 10400K .......... .......... .......... .......... .......... 80% 8.21M 1s
 10450K .......... .......... .......... .......... .......... 80% 1.16M 1s
 10500K .......... .......... .......... .......... .......... 81% 6.98M 1s
 10550K .......... .......... .......... .......... .......... 81% 4.43M 1s
 10600K .......... .......... .......... .......... .......... 82% 8.71M 1s
 10650K .......... .......... .......... .......... .......... 82% 7.01M 1s
 10700K .......... .......... .......... .......... .......... 82% 2.97M 1s
 10750K .......... .......... .......... .......... .......... 83% 9.26M 1s
 10800K .......... .......... .......... .......... .......... 83% 1.17M 1s
 10850K .......... .......... .......... .......... .......... 83% 7.67M 1s
 10900K .......... .......... .......... .......... .......... 84% 6.48M 1s
 10950K .......... .......... .......... .......... .......... 84% 3.13M 1s
 11000K .......... .......... .......... .......... .......... 85% 6.09M 1s
 11050K .......... .......... .......... .......... .......... 85% 3.27M 1s
 11100K .......... .......... .......... .......... .......... 85% 2.70M 1s
 11150K .......... .......... .......... .......... .......... 86% 9.64M 1s
 11200K .......... .......... .......... .......... .......... 86% 9.19M 1s
 11250K .......... .......... .......... .......... .......... 87% 6.01M 1s
 11300K .......... .......... .......... .......... .......... 87% 1.99M 1s
 11350K .......... .......... .......... .......... .......... 87% 9.98M 1s
 11400K .......... .......... .......... .......... .......... 88% 4.17M 1s
 11450K .......... .......... .......... .......... .......... 88% 5.84M 1s
 11500K .......... .......... .......... .......... .......... 89% 2.46M 1s
 11550K .......... .......... .......... .......... .......... 89% 6.61M 1s
 11600K .......... .......... .......... .......... .......... 89% 4.56M 1s
 11650K .......... .......... .......... .......... .......... 90% 8.66M 1s
 11700K .......... .......... .......... .......... .......... 90% 8.32M 0s
 11750K .......... .......... .......... .......... .......... 90% 1.67M 0s
 11800K .......... .......... .......... .......... .......... 91% 5.18M 0s
 11850K .......... .......... .......... .......... .......... 91% 4.00M 0s
 11900K .......... .......... .......... .......... .......... 92% 8.96M 0s
 11950K .......... .......... .......... .......... .......... 92% 2.34M 0s
 12000K .......... .......... .......... .......... .......... 92% 8.34M 0s
 12050K .......... .......... .......... .......... .......... 93% 2.66M 0s
 12100K .......... .......... .......... .......... .......... 93%  942K 0s
 12150K .......... .......... .......... .......... .......... 94% 8.83M 0s
 12200K .......... .......... .......... .......... .......... 94% 4.17M 0s
 12250K .......... .......... .......... .......... .......... 94% 3.07M 0s
 12300K .......... .......... .......... .......... .......... 95% 3.19M 0s
 12350K .......... .......... .......... .......... .......... 95% 1.00M 0s
 12400K .......... .......... .......... .......... .......... 95% 5.38M 0s
 12450K .......... .......... .......... .......... .......... 96% 3.67M 0s
 12500K .......... .......... .......... .......... .......... 96% 10.3M 0s
 12550K .......... .......... .......... .......... .......... 97% 8.44M 0s
 12600K .......... .......... .......... .......... .......... 97% 3.38M 0s
 12650K .......... .......... .......... .......... .......... 97% 3.26M 0s
 12700K .......... .......... .......... .......... .......... 98%  827K 0s
 12750K .......... .......... .......... .......... .......... 98% 9.31M 0s
 12800K .......... .......... .......... .......... .......... 99% 8.31M 0s
 12850K .......... .......... .......... .......... .......... 99% 4.87M 0s
 12900K .......... .......... .......... .......... .......... 99% 10.5M 0s
 12950K .......... .......... ......                          100% 1.14M=5.0s

2016-04-30 01:24:42 (2.52 MB/s) - ‘cirros-0.3.4-x86_64-disk.img’ saved [13287936/13287936]

+ echo 'export OS_IMAGE_API_VERSION=2' ' '
+ tee -a admin-openrc demo-openrc
export OS_IMAGE_API_VERSION=2  
+ . admin-openrc
++ export OS_PROJECT_DOMAIN_NAME=default
++ OS_PROJECT_DOMAIN_NAME=default
++ export OS_USER_DOMAIN_NAME=default
++ OS_USER_DOMAIN_NAME=default
++ export OS_PROJECT_NAME=admin
++ OS_PROJECT_NAME=admin
++ export OS_USERNAME=admin
++ OS_USERNAME=admin
++ export OS_PASSWORD=Super123
++ OS_PASSWORD=Super123
++ export OS_AUTH_URL=http://controller:35357/v3
++ OS_AUTH_URL=http://controller:35357/v3
++ export OS_IDENTITY_API_VERSION=3
++ OS_IDENTITY_API_VERSION=3
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
+ glance image-create --name cirros --file cirros-0.3.4-x86_64-disk.img --disk-format qcow2 --container-format bare --visibility public --progress
+------------------+--------------------------------------+
| Property         | Value                                |
+------------------+--------------------------------------+
| checksum         | ee1eca47dc88f4879d8a229cc70a07c6     |
| container_format | bare                                 |
| created_at       | 2016-04-30T08:24:43Z                 |
| disk_format      | qcow2                                |
| id               | 095a421e-5509-449a-aaff-2f8ab954eb10 |
| min_disk         | 0                                    |
| min_ram          | 0                                    |
| name             | cirros                               |
| owner            | 44d166e20c6645a4917f0bfe22eb44cf     |
| protected        | False                                |
| size             | 13287936                             |
| status           | active                               |
| tags             | []                                   |
| updated_at       | 2016-04-30T08:24:43Z                 |
| virtual_size     | None                                 |
| visibility       | public                               |
+------------------+--------------------------------------+
+ glance image-list
+--------------------------------------+--------+
| ID                                   | Name   |
+--------------------------------------+--------+
| 095a421e-5509-449a-aaff-2f8ab954eb10 | cirros |
+--------------------------------------+--------+
+ glaneceResult=0
+ [[ '' -eq 1 ]]
+ echo 'Pass glance service installation'
Pass glance service installation
+ rm -f cirros-0.3.4-x86_64-disk.img
+ exit 0
