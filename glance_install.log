+ cd /root/work/glance_service
+ firewall-cmd --add-port=9393/tcp --permanent
success
+ firewall-cmd --reload
success
+ mysql -u root -pSuper123
+ . admin-openrc
++ export OS_PROJECT_DOMAIN_NAME=default
++ OS_PROJECT_DOMAIN_NAME=default
++ export OS_USER_DOMAIN_NAME=default
++ OS_USER_DOMAIN_NAME=default
++ export OS_PROJECT_NAME=admin
++ OS_PROJECT_NAME=admin
++ export OS_USERNAME=admin
++ OS_USERNAME=admin
++ export OS_PASSWORD=Super123
++ OS_PASSWORD=Super123
++ export OS_AUTH_URL=http://controller:35357/v3
++ OS_AUTH_URL=http://controller:35357/v3
++ export OS_IDENTITY_API_VERSION=3
++ OS_IDENTITY_API_VERSION=3
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
+ yum -y install expect
+ openstack user create --domain default --password Super123 glance
+-----------+----------------------------------+
| Field     | Value                            |
+-----------+----------------------------------+
| domain_id | a39af586683f404a9243687ce394c9f6 |
| enabled   | True                             |
| id        | 252ed225fabe4642abe16047cee039ba |
| name      | glance                           |
+-----------+----------------------------------+
+ openstack role add --project service --user glance admin
+ openstack service create --name glance --description 'OpenStack Image service' image
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | OpenStack Image service          |
| enabled     | True                             |
| id          | 7d74fdfd14044cc2a02d5da987ac3081 |
| name        | glance                           |
| type        | image                            |
+-------------+----------------------------------+
+ openstack endpoint create --region RegionOne image public http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | 3205266ac08b4e9cb8288ca6cb95f5be |
| interface    | public                           |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 7d74fdfd14044cc2a02d5da987ac3081 |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+
+ openstack endpoint create --region RegionOne image internal http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | 07c64df825744430ad874f4a75e8c6b5 |
| interface    | internal                         |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 7d74fdfd14044cc2a02d5da987ac3081 |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+
+ openstack endpoint create --region RegionOne image admin http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | da05b6c3b82f4026ba661eb303a8e9d4 |
| interface    | admin                            |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 7d74fdfd14044cc2a02d5da987ac3081 |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+
+ echo 'installing glance package on controller'
installing glance package on controller
+ yum -y install openstack-glance wget
+ openstack-config --set /etc/glance/glance-api.conf database connection mysql+pymysql://glance:Super123@controller/glance
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_uri http://controller:5000
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_url http://controller:35357
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken memcached_servers controller:11211
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_type password
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken project_domain_name default
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken user_domain_name default
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken project_name service
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken username glance
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken password Super123
+ openstack-config --set /etc/glance/glance-api.conf paste_deploy flavor keystone
+ openstack-config --set /etc/glance/glance-api.conf glance_store default_store file
+ openstack-config --set /etc/glance/glance-api.conf glance_store store file,http
+ openstack-config --set /etc/glance/glance-api.conf glance_store filesystem_store_datadir /var/lib/glance/images/
+ openstack-config --set /etc/glance/glance-api.conf DEFAULT verbose True
+ openstack-config --set /etc/glance/glance-registry.conf database connection mysql+pymysql://glance:Super123@controller/glance
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_uri http://controller:5000
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_url http://controller:35357
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken memcached_servers controller:11211
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_type password
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken project_domain_name default
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken user_domain_name default
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken project_name service
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken username glance
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken password Super123
+ openstack-config --set /etc/glance/glance-registry.conf paste_deploy flavor keystone
+ openstack-config --set /etc/glance/glance-registry.conf DEFAULT verbose True
+ su -s /bin/sh -c 'glance-manage db_sync' glance
Option "verbose" from group "DEFAULT" is deprecated for removal.  Its value may be silently ignored in the future.
/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py:1056: OsloDBDeprecationWarning: EngineFacade is deprecated; please use oslo_db.sqlalchemy.enginefacade
  expire_on_commit=expire_on_commit, _conf=conf)
/usr/lib/python2.7/site-packages/pymysql/cursors.py:146: Warning: Duplicate index 'ix_image_properties_image_id_name' defined on the table 'glance.image_properties'. This is deprecated and will be disallowed in a future release.
  result = self._query(query)
+ systemctl enable openstack-glance-api.service openstack-glance-registry.service
Created symlink from /etc/systemd/system/multi-user.target.wants/openstack-glance-api.service to /usr/lib/systemd/system/openstack-glance-api.service.
Created symlink from /etc/systemd/system/multi-user.target.wants/openstack-glance-registry.service to /usr/lib/systemd/system/openstack-glance-registry.service.
+ systemctl start openstack-glance-api.service openstack-glance-registry.service
+ wget http://download.cirros-cloud.net/0.3.4/cirros-0.3.4-x86_64-disk.img
--2016-04-29 12:44:50--  http://download.cirros-cloud.net/0.3.4/cirros-0.3.4-x86_64-disk.img
Resolving download.cirros-cloud.net (download.cirros-cloud.net)... 64.90.42.85
Connecting to download.cirros-cloud.net (download.cirros-cloud.net)|64.90.42.85|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 13287936 (13M) [text/plain]
Saving to: ‘cirros-0.3.4-x86_64-disk.img’

     0K .......... .......... .......... .......... ..........  0%  726K 18s
    50K .......... .......... .......... .......... ..........  0% 1.06M 15s
   100K .......... .......... .......... .......... ..........  1% 1.92M 12s
   150K .......... .......... .......... .......... ..........  1% 2.10M 10s
   200K .......... .......... .......... .......... ..........  1% 2.09M 10s
   250K .......... .......... .......... .......... ..........  2% 2.06M 9s
   300K .......... .......... .......... .......... ..........  2% 2.20M 8s
   350K .......... .......... .......... .......... ..........  3% 38.3M 7s
   400K .......... .......... .......... .......... ..........  3% 2.05M 7s
   450K .......... .......... .......... .......... ..........  3% 2.05M 7s
   500K .......... .......... .......... .......... ..........  4% 2.26M 7s
   550K .......... .......... .......... .......... ..........  4% 84.7M 6s
   600K .......... .......... .......... .......... ..........  5% 2.00M 6s
   650K .......... .......... .......... .......... ..........  5% 2.21M 6s
   700K .......... .......... .......... .......... ..........  5% 2.11M 6s
   750K .......... .......... .......... .......... ..........  6% 2.12M 6s
   800K .......... .......... .......... .......... ..........  6% 38.7M 6s
   850K .......... .......... .......... .......... ..........  6% 2.11M 6s
   900K .......... .......... .......... .......... ..........  7% 2.12M 6s
   950K .......... .......... .......... .......... ..........  7% 51.3M 5s
  1000K .......... .......... .......... .......... ..........  8% 2.00M 5s
  1050K .......... .......... .......... .......... ..........  8% 2.25M 5s
  1100K .......... .......... .......... .......... ..........  8% 35.0M 5s
  1150K .......... .......... .......... .......... ..........  9% 2.12M 5s
  1200K .......... .......... .......... .......... ..........  9%  160M 5s
  1250K .......... .......... .......... .......... .......... 10% 2.09M 5s
  1300K .......... .......... .......... .......... .......... 10% 2.11M 5s
  1350K .......... .......... .......... .......... .......... 10% 2.19M 5s
  1400K .......... .......... .......... .......... .......... 11% 37.0M 5s
  1450K .......... .......... .......... .......... .......... 11% 2.16M 5s
  1500K .......... .......... .......... .......... .......... 11% 63.5M 4s
  1550K .......... .......... .......... .......... .......... 12% 2.09M 5s
  1600K .......... .......... .......... .......... .......... 12%  182M 4s
  1650K .......... .......... .......... .......... .......... 13% 2.20M 4s
  1700K .......... .......... .......... .......... .......... 13% 2.21M 4s
  1750K .......... .......... .......... .......... .......... 13% 29.0M 4s
  1800K .......... .......... .......... .......... .......... 14% 2.10M 4s
  1850K .......... .......... .......... .......... .......... 14% 61.3M 4s
  1900K .......... .......... .......... .......... .......... 15% 1.92M 4s
  1950K .......... .......... .......... .......... .......... 15% 40.4M 4s
  2000K .......... .......... .......... .......... .......... 15% 2.38M 4s
  2050K .......... .......... .......... .......... .......... 16% 20.2M 4s
  2100K .......... .......... .......... .......... .......... 16% 2.45M 4s
  2150K .......... .......... .......... .......... .......... 16% 12.6M 4s
  2200K .......... .......... .......... .......... .......... 17% 2.48M 4s
  2250K .......... .......... .......... .......... .......... 17% 14.1M 4s
  2300K .......... .......... .......... .......... .......... 18% 2.41M 4s
  2350K .......... .......... .......... .......... .......... 18% 5.61M 4s
  2400K .......... .......... .......... .......... .......... 18% 3.37M 4s
  2450K .......... .......... .......... .......... .......... 19% 2.08M 4s
  2500K .......... .......... .......... .......... .......... 19%  100M 4s
  2550K .......... .......... .......... .......... .......... 20% 2.14M 4s
  2600K .......... .......... .......... .......... .......... 20% 16.0M 3s
  2650K .......... .......... .......... .......... .......... 20% 50.3M 3s
  2700K .......... .......... .......... .......... .......... 21% 2.19M 3s
  2750K .......... .......... .......... .......... .......... 21% 2.46M 3s
  2800K .......... .......... .......... .......... .......... 21% 27.8M 3s
  2850K .......... .......... .......... .......... .......... 22% 15.7M 3s
  2900K .......... .......... .......... .......... .......... 22% 2.46M 3s
  2950K .......... .......... .......... .......... .......... 23% 15.0M 3s
  3000K .......... .......... .......... .......... .......... 23% 2.40M 3s
  3050K .......... .......... .......... .......... .......... 23% 15.4M 3s
  3100K .......... .......... .......... .......... .......... 24% 2.36M 3s
  3150K .......... .......... .......... .......... .......... 24% 17.7M 3s
  3200K .......... .......... .......... .......... .......... 25% 2.36M 3s
  3250K .......... .......... .......... .......... .......... 25% 16.6M 3s
  3300K .......... .......... .......... .......... .......... 25%  247M 3s
  3350K .......... .......... .......... .......... .......... 26% 2.37M 3s
  3400K .......... .......... .......... .......... .......... 26% 15.2M 3s
  3450K .......... .......... .......... .......... .......... 26% 2.39M 3s
  3500K .......... .......... .......... .......... .......... 27% 13.4M 3s
  3550K .......... .......... .......... .......... .......... 27% 2.52M 3s
  3600K .......... .......... .......... .......... .......... 28% 15.9M 3s
  3650K .......... .......... .......... .......... .......... 28% 2.41M 3s
  3700K .......... .......... .......... .......... .......... 28% 21.3M 3s
  3750K .......... .......... .......... .......... .......... 29% 49.6M 3s
  3800K .......... .......... .......... .......... .......... 29% 2.32M 3s
  3850K .......... .......... .......... .......... .......... 30% 20.2M 3s
  3900K .......... .......... .......... .......... .......... 30% 2.25M 3s
  3950K .......... .......... .......... .......... .......... 30% 20.0M 3s
  4000K .......... .......... .......... .......... .......... 31% 85.7M 3s
  4050K .......... .......... .......... .......... .......... 31% 2.22M 3s
  4100K .......... .......... .......... .......... .......... 31% 17.5M 3s
  4150K .......... .......... .......... .......... .......... 32% 1.88M 3s
  4200K .......... .......... .......... .......... .......... 32% 26.4M 3s
  4250K .......... .......... .......... .......... .......... 33% 92.7M 2s
  4300K .......... .......... .......... .......... .......... 33% 2.80M 2s
  4350K .......... .......... .......... .......... .......... 33% 8.59M 2s
  4400K .......... .......... .......... .......... .......... 34% 2.90M 2s
  4450K .......... .......... .......... .......... .......... 34% 33.6M 2s
  4500K .......... .......... .......... .......... .......... 35% 10.8M 2s
  4550K .......... .......... .......... .......... .......... 35% 2.57M 2s
  4600K .......... .......... .......... .......... .......... 35% 14.2M 2s
  4650K .......... .......... .......... .......... .......... 36% 33.3M 2s
  4700K .......... .......... .......... .......... .......... 36% 2.59M 2s
  4750K .......... .......... .......... .......... .......... 36% 10.8M 2s
  4800K .......... .......... .......... .......... .......... 37% 2.60M 2s
  4850K .......... .......... .......... .......... .......... 37% 88.6M 2s
  4900K .......... .......... .......... .......... .......... 38% 10.8M 2s
  4950K .......... .......... .......... .......... .......... 38% 2.67M 2s
  5000K .......... .......... .......... .......... .......... 38%  140M 2s
  5050K .......... .......... .......... .......... .......... 39% 6.87M 2s
  5100K .......... .......... .......... .......... .......... 39% 88.4K 3s
  5150K .......... .......... .......... .......... .......... 40% 53.9M 3s
  5200K .......... .......... .......... .......... .......... 40%  157M 3s
  5250K .......... .......... .......... .......... .......... 40% 22.9M 3s
  5300K .......... .......... .......... .......... .......... 41% 17.6M 3s
  5350K .......... .......... .......... .......... .......... 41% 16.7M 3s
  5400K .......... .......... .......... .......... .......... 41% 48.9M 3s
  5450K .......... .......... .......... .......... .......... 42%  357M 3s
  5500K .......... .......... .......... .......... .......... 42%  376M 3s
  5550K .......... .......... .......... .......... .......... 43%  348M 3s
  5600K .......... .......... .......... .......... .......... 43%  365M 3s
  5650K .......... .......... .......... .......... .......... 43%  409M 2s
  5700K .......... .......... .......... .......... .......... 44%  231M 2s
  5750K .......... .......... .......... .......... .......... 44%  344M 2s
  5800K .......... .......... .......... .......... .......... 45%  208M 2s
  5850K .......... .......... .......... .......... .......... 45%  327M 2s
  5900K .......... .......... .......... .......... .......... 45% 3.77M 2s
  5950K .......... .......... .......... .......... .......... 46% 2.30M 2s
  6000K .......... .......... .......... .......... .......... 46% 26.9M 2s
  6050K .......... .......... .......... .......... .......... 47% 2.24M 2s
  6100K .......... .......... .......... .......... .......... 47% 28.8M 2s
  6150K .......... .......... .......... .......... .......... 47% 2.27M 2s
  6200K .......... .......... .......... .......... .......... 48% 24.1M 2s
  6250K .......... .......... .......... .......... .......... 48%  412M 2s
  6300K .......... .......... .......... .......... .......... 48% 2.12M 2s
  6350K .......... .......... .......... .......... .......... 49%  351M 2s
  6400K .......... .......... .......... .......... .......... 49% 2.23M 2s
  6450K .......... .......... .......... .......... .......... 50% 31.7M 2s
  6500K .......... .......... .......... .......... .......... 50% 2.09M 2s
  6550K .......... .......... .......... .......... .......... 50%  281M 2s
  6600K .......... .......... .......... .......... .......... 51%  440M 2s
  6650K .......... .......... .......... .......... .......... 51% 2.25M 2s
  6700K .......... .......... .......... .......... .......... 52% 30.4M 2s
  6750K .......... .......... .......... .......... .......... 52%  245M 2s
  6800K .......... .......... .......... .......... .......... 52% 2.06M 2s
  6850K .......... .......... .......... .......... .......... 53%  326M 2s
  6900K .......... .......... .......... .......... .......... 53% 2.28M 2s
  6950K .......... .......... .......... .......... .......... 53% 44.6M 2s
  7000K .......... .......... .......... .......... .......... 54%  251K 2s
  7050K .......... .......... .......... .......... .......... 54% 10.2M 2s
  7100K .......... .......... .......... .......... .......... 55% 42.3M 2s
  7150K .......... .......... .......... .......... .......... 55%  382M 2s
  7200K .......... .......... .......... .......... .......... 55%  344M 2s
  7250K .......... .......... .......... .......... .......... 56% 33.1M 2s
  7300K .......... .......... .......... .......... .......... 56%  356M 2s
  7350K .......... .......... .......... .......... .......... 57%  395M 2s
  7400K .......... .......... .......... .......... .......... 57%  440M 2s
  7450K .......... .......... .......... .......... .......... 57%  383M 2s
  7500K .......... .......... .......... .......... .......... 58%  371M 2s
  7550K .......... .......... .......... .......... .......... 58%  423M 2s
  7600K .......... .......... .......... .......... .......... 58%  298M 2s
  7650K .......... .......... .......... .......... .......... 59% 4.66M 2s
  7700K .......... .......... .......... .......... .......... 59%  383M 2s
  7750K .......... .......... .......... .......... .......... 60% 32.0M 2s
  7800K .......... .......... .......... .......... .......... 60% 2.22M 2s
  7850K .......... .......... .......... .......... .......... 60% 34.8M 2s
  7900K .......... .......... .......... .......... .......... 61%  438M 2s
  7950K .......... .......... .......... .......... .......... 61% 2.18M 2s
  8000K .......... .......... .......... .......... .......... 62% 34.7M 1s
  8050K .......... .......... .......... .......... .......... 62%  420M 1s
  8100K .......... .......... .......... .......... .......... 62% 2.19M 1s
  8150K .......... .......... .......... .......... .......... 63% 51.4M 1s
  8200K .......... .......... .......... .......... .......... 63%  433M 1s
  8250K .......... .......... .......... .......... .......... 63% 2.15M 1s
  8300K .......... .......... .......... .......... .......... 64% 50.4M 1s
  8350K .......... .......... .......... .......... .......... 64%  377M 1s
  8400K .......... .......... .......... .......... .......... 65% 1.99M 1s
  8450K .......... .......... .......... .......... .......... 65%  276M 1s
  8500K .......... .......... .......... .......... .......... 65% 2.27M 1s
  8550K .......... .......... .......... .......... .......... 66%  187M 1s
  8600K .......... .......... .......... .......... .......... 66% 26.9M 1s
  8650K .......... .......... .......... .......... .......... 67% 2.37M 1s
  8700K .......... .......... .......... .......... .......... 67% 57.9M 1s
  8750K .......... .......... .......... .......... .......... 67% 27.0M 1s
  8800K .......... .......... .......... .......... .......... 68% 2.03M 1s
  8850K .......... .......... .......... .......... .......... 68%  106M 1s
  8900K .......... .......... .......... .......... .......... 68%  430M 1s
  8950K .......... .......... .......... .......... .......... 69% 2.19M 1s
  9000K .......... .......... .......... .......... .......... 69% 30.6M 1s
  9050K .......... .......... .......... .......... .......... 70%  418M 1s
  9100K .......... .......... .......... .......... .......... 70%  495M 1s
  9150K .......... .......... .......... .......... .......... 70% 2.11M 1s
  9200K .......... .......... .......... .......... .......... 71%  131M 1s
  9250K .......... .......... .......... .......... .......... 71%  262M 1s
  9300K .......... .......... .......... .......... .......... 72% 2.10M 1s
  9350K .......... .......... .......... .......... .......... 72%  269M 1s
  9400K .......... .......... .......... .......... .......... 72% 2.25M 1s
  9450K .......... .......... .......... .......... .......... 73% 84.5M 1s
  9500K .......... .......... .......... .......... .......... 73% 37.4M 1s
  9550K .......... .......... .......... .......... .......... 73%  292M 1s
  9600K .......... .......... .......... .......... .......... 74% 2.17M 1s
  9650K .......... .......... .......... .......... .......... 74%  184M 1s
  9700K .......... .......... .......... .......... .......... 75% 44.5M 1s
  9750K .......... .......... .......... .......... .......... 75% 2.29M 1s
  9800K .......... .......... .......... .......... .......... 75%  190M 1s
  9850K .......... .......... .......... .......... .......... 76% 13.0M 1s
  9900K .......... .......... .......... .......... .......... 76%  310M 1s
  9950K .......... .......... .......... .......... .......... 77% 2.46M 1s
 10000K .......... .......... .......... .......... .......... 77% 27.0M 1s
 10050K .......... .......... .......... .......... .......... 77%  119M 1s
 10100K .......... .......... .......... .......... .......... 78% 2.27M 1s
 10150K .......... .......... .......... .......... .......... 78%  116M 1s
 10200K .......... .......... .......... .......... .......... 78% 32.5M 1s
 10250K .......... .......... .......... .......... .......... 79% 2.25M 1s
 10300K .......... .......... .......... .......... .......... 79%  240M 1s
 10350K .......... .......... .......... .......... .......... 80% 21.9M 1s
 10400K .......... .......... .......... .......... .......... 80%  417M 1s
 10450K .......... .......... .......... .......... .......... 80% 2.08M 1s
 10500K .......... .......... .......... .......... .......... 81%  381M 1s
 10550K .......... .......... .......... .......... .......... 81% 26.3M 1s
 10600K .......... .......... .......... .......... .......... 82% 2.18M 1s
 10650K .......... .......... .......... .......... .......... 82% 23.9M 1s
 10700K .......... .......... .......... .......... .......... 82%  252M 1s
 10750K .......... .......... .......... .......... .......... 83%  222M 1s
 10800K .......... .......... .......... .......... .......... 83% 2.37M 1s
 10850K .......... .......... .......... .......... .......... 83% 31.8M 1s
 10900K .......... .......... .......... .......... .......... 84% 81.0M 1s
 10950K .......... .......... .......... .......... .......... 84% 2.32M 1s
 11000K .......... .......... .......... .......... .......... 85%  217M 1s
 11050K .......... .......... .......... .......... .......... 85% 28.8M 0s
 11100K .......... .......... .......... .......... .......... 85% 2.29M 0s
 11150K .......... .......... .......... .......... .......... 86%  125M 0s
 11200K .......... .......... .......... .......... .......... 86% 42.0M 0s
 11250K .......... .......... .......... .......... .......... 87% 48.8M 0s
 11300K .......... .......... .......... .......... .......... 87% 2.29M 0s
 11350K .......... .......... .......... .......... .......... 87% 70.3M 0s
 11400K .......... .......... .......... .......... .......... 88% 31.4M 0s
 11450K .......... .......... .......... .......... .......... 88% 88.9M 0s
 11500K .......... .......... .......... .......... .......... 89% 2.28M 0s
 11550K .......... .......... .......... .......... .......... 89%  111M 0s
 11600K .......... .......... .......... .......... .......... 89% 55.5M 0s
 11650K .......... .......... .......... .......... .......... 90% 46.7M 0s
 11700K .......... .......... .......... .......... .......... 90% 2.28M 0s
 11750K .......... .......... .......... .......... .......... 90%  269M 0s
 11800K .......... .......... .......... .......... .......... 91% 24.1M 0s
 11850K .......... .......... .......... .......... .......... 91%  457M 0s
 11900K .......... .......... .......... .......... .......... 92% 2.26M 0s
 11950K .......... .......... .......... .......... .......... 92%  175M 0s
 12000K .......... .......... .......... .......... .......... 92% 25.5M 0s
 12050K .......... .......... .......... .......... .......... 93% 2.37M 0s
 12100K .......... .......... .......... .......... .......... 93% 75.4M 0s
 12150K .......... .......... .......... .......... .......... 94% 35.0M 0s
 12200K .......... .......... .......... .......... .......... 94% 42.4M 0s
 12250K .......... .......... .......... .......... .......... 94% 2.35M 0s
 12300K .......... .......... .......... .......... .......... 95% 40.0M 0s
 12350K .......... .......... .......... .......... .......... 95% 21.1M 0s
 12400K .......... .......... .......... .......... .......... 95% 42.8M 0s
 12450K .......... .......... .......... .......... .......... 96%  179M 0s
 12500K .......... .......... .......... .......... .......... 96% 2.40M 0s
 12550K .......... .......... .......... .......... .......... 97%  261M 0s
 12600K .......... .......... .......... .......... .......... 97% 20.0M 0s
 12650K .......... .......... .......... .......... .......... 97% 2.53M 0s
 12700K .......... .......... .......... .......... .......... 98% 29.3M 0s
 12750K .......... .......... .......... .......... .......... 98% 20.7M 0s
 12800K .......... .......... .......... .......... .......... 99%  130M 0s
 12850K .......... .......... .......... .......... .......... 99% 2.37M 0s
 12900K .......... .......... .......... .......... .......... 99%  262M 0s
 12950K .......... .......... ......                          100% 15.1M=3.1s

2016-04-29 12:44:54 (4.05 MB/s) - ‘cirros-0.3.4-x86_64-disk.img’ saved [13287936/13287936]

+ echo 'export OS_IMAGE_API_VERSION=2' ' '
+ tee -a admin-openrc demo-openrc
export OS_IMAGE_API_VERSION=2  
+ . admin-openrc
++ export OS_PROJECT_DOMAIN_NAME=default
++ OS_PROJECT_DOMAIN_NAME=default
++ export OS_USER_DOMAIN_NAME=default
++ OS_USER_DOMAIN_NAME=default
++ export OS_PROJECT_NAME=admin
++ OS_PROJECT_NAME=admin
++ export OS_USERNAME=admin
++ OS_USERNAME=admin
++ export OS_PASSWORD=Super123
++ OS_PASSWORD=Super123
++ export OS_AUTH_URL=http://controller:35357/v3
++ OS_AUTH_URL=http://controller:35357/v3
++ export OS_IDENTITY_API_VERSION=3
++ OS_IDENTITY_API_VERSION=3
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
+ glance image-create --name cirros --file cirros-0.3.4-x86_64-disk.img --disk-format qcow2 --container-format bare --visibility public --progress
+------------------+--------------------------------------+
| Property         | Value                                |
+------------------+--------------------------------------+
| checksum         | ee1eca47dc88f4879d8a229cc70a07c6     |
| container_format | bare                                 |
| created_at       | 2016-04-29T19:44:59Z                 |
| disk_format      | qcow2                                |
| id               | 4beb0e25-2f36-43a5-b626-b51e7b1191d7 |
| min_disk         | 0                                    |
| min_ram          | 0                                    |
| name             | cirros                               |
| owner            | a56bae4ee4d04e8bb0a500933b256d9f     |
| protected        | False                                |
| size             | 13287936                             |
| status           | active                               |
| tags             | []                                   |
| updated_at       | 2016-04-29T19:44:59Z                 |
| virtual_size     | None                                 |
| visibility       | public                               |
+------------------+--------------------------------------+
+ glance image-list
+--------------------------------------+--------+
| ID                                   | Name   |
+--------------------------------------+--------+
| 4beb0e25-2f36-43a5-b626-b51e7b1191d7 | cirros |
+--------------------------------------+--------+
+ glaneceResult=0
+ [[ '' -eq 1 ]]
+ echo 'Pass glance service installation'
Pass glance service installation
+ rm -f cirros-0.3.4-x86_64-disk.img
+ exit 0
