+ cd /root/work/glance_service
+ firewall-cmd --add-port=9292/tcp --permanent
success
+ firewall-cmd --reload
success
+ mysql -u root -pSuper123
+ . admin-openrc
++ export OS_PROJECT_DOMAIN_NAME=default
++ OS_PROJECT_DOMAIN_NAME=default
++ export OS_USER_DOMAIN_NAME=default
++ OS_USER_DOMAIN_NAME=default
++ export OS_PROJECT_NAME=admin
++ OS_PROJECT_NAME=admin
++ export OS_USERNAME=admin
++ OS_USERNAME=admin
++ export OS_PASSWORD=Super123
++ OS_PASSWORD=Super123
++ export OS_AUTH_URL=http://controller:35357/v3
++ OS_AUTH_URL=http://controller:35357/v3
++ export OS_IDENTITY_API_VERSION=3
++ OS_IDENTITY_API_VERSION=3
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
+ yum -y install expect
+ openstack user create --domain default --password Super123 glance
+-----------+----------------------------------+
| Field     | Value                            |
+-----------+----------------------------------+
| domain_id | 1a3bc33d28d24e589145bf97dc14b345 |
| enabled   | True                             |
| id        | 46452f81d34d4e95a95f87ffb0c6ca59 |
| name      | glance                           |
+-----------+----------------------------------+
+ openstack role add --project service --user glance admin
+ openstack service create --name glance --description 'OpenStack Image service' image
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | OpenStack Image service          |
| enabled     | True                             |
| id          | 204142e9010f4ca4a9f76e1846989dc7 |
| name        | glance                           |
| type        | image                            |
+-------------+----------------------------------+
+ openstack endpoint create --region RegionOne image public http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | 4f8475813e3a40148258dc922cdd0329 |
| interface    | public                           |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 204142e9010f4ca4a9f76e1846989dc7 |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+
+ openstack endpoint create --region RegionOne image internal http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | 717a7b6feb514d94bfad14b163668b10 |
| interface    | internal                         |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 204142e9010f4ca4a9f76e1846989dc7 |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+
+ openstack endpoint create --region RegionOne image admin http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | b811b79a84364c25bb5da784061fc59d |
| interface    | admin                            |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 204142e9010f4ca4a9f76e1846989dc7 |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+
+ echo 'installing glance package on controller'
installing glance package on controller
+ yum -y install openstack-glance wget
+ openstack-config --set /etc/glance/glance-api.conf database connection mysql+pymysql://glance:Super123@controller/glance
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_uri http://controller:5000
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_url http://controller:35357
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken memcached_servers controller:11211
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_type password
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken project_domain_name default
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken user_domain_name default
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken project_name service
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken username glance
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken password Super123
+ openstack-config --set /etc/glance/glance-api.conf paste_deploy flavor keystone
+ openstack-config --set /etc/glance/glance-api.conf glance_store default_store file
+ openstack-config --set /etc/glance/glance-api.conf glance_store store file,http
+ openstack-config --set /etc/glance/glance-api.conf glance_store filesystem_store_datadir /var/lib/glance/images/
+ openstack-config --set /etc/glance/glance-api.conf DEFAULT verbose True
+ openstack-config --set /etc/glance/glance-registry.conf database connection mysql+pymysql://glance:Super123@controller/glance
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_uri http://controller:5000
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_url http://controller:35357
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken memcached_servers controller:11211
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_type password
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken project_domain_name default
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken user_domain_name default
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken project_name service
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken username glance
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken password Super123
+ openstack-config --set /etc/glance/glance-registry.conf paste_deploy flavor keystone
+ openstack-config --set /etc/glance/glance-registry.conf DEFAULT verbose True
+ su -s /bin/sh -c 'glance-manage db_sync' glance
Option "verbose" from group "DEFAULT" is deprecated for removal.  Its value may be silently ignored in the future.
/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py:1056: OsloDBDeprecationWarning: EngineFacade is deprecated; please use oslo_db.sqlalchemy.enginefacade
  expire_on_commit=expire_on_commit, _conf=conf)
/usr/lib/python2.7/site-packages/pymysql/cursors.py:146: Warning: Duplicate index 'ix_image_properties_image_id_name' defined on the table 'glance.image_properties'. This is deprecated and will be disallowed in a future release.
  result = self._query(query)
+ systemctl enable openstack-glance-api.service openstack-glance-registry.service
Created symlink from /etc/systemd/system/multi-user.target.wants/openstack-glance-api.service to /usr/lib/systemd/system/openstack-glance-api.service.
Created symlink from /etc/systemd/system/multi-user.target.wants/openstack-glance-registry.service to /usr/lib/systemd/system/openstack-glance-registry.service.
+ systemctl start openstack-glance-api.service openstack-glance-registry.service
+ wget http://download.cirros-cloud.net/0.3.4/cirros-0.3.4-x86_64-disk.img
--2016-05-01 02:26:07--  http://download.cirros-cloud.net/0.3.4/cirros-0.3.4-x86_64-disk.img
Resolving download.cirros-cloud.net (download.cirros-cloud.net)... 64.90.42.85
Connecting to download.cirros-cloud.net (download.cirros-cloud.net)|64.90.42.85|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 13287936 (13M) [text/plain]
Saving to: ‘cirros-0.3.4-x86_64-disk.img’

     0K .......... .......... .......... .......... ..........  0%  356K 36s
    50K .......... .......... .......... .......... ..........  0%  741K 27s
   100K .......... .......... .......... .......... ..........  1%  705K 24s
   150K .......... .......... .......... .......... ..........  1% 1.06M 21s
   200K .......... .......... .......... .......... ..........  1%  821K 20s
   250K .......... .......... .......... .......... ..........  2%  998K 18s
   300K .......... .......... .......... .......... ..........  2% 1.22M 17s
   350K .......... .......... .......... .......... ..........  3% 1.37M 16s
   400K .......... .......... .......... .......... ..........  3% 1.18M 15s
   450K .......... .......... .......... .......... ..........  3% 1.19M 15s
   500K .......... .......... .......... .......... ..........  4% 1.75M 14s
   550K .......... .......... .......... .......... ..........  4% 1.57M 13s
   600K .......... .......... .......... .......... ..........  5% 1.39M 13s
   650K .......... .......... .......... .......... ..........  5% 1.84M 13s
   700K .......... .......... .......... .......... ..........  5% 2.01M 12s
   750K .......... .......... .......... .......... ..........  6% 1.79M 12s
   800K .......... .......... .......... .......... ..........  6% 2.90M 11s
   850K .......... .......... .......... .......... ..........  6% 1.57M 11s
   900K .......... .......... .......... .......... ..........  7% 1.57M 11s
   950K .......... .......... .......... .......... ..........  7% 3.02M 10s
  1000K .......... .......... .......... .......... ..........  8% 1.50M 10s
  1050K .......... .......... .......... .......... ..........  8% 1.72M 10s
  1100K .......... .......... .......... .......... ..........  8% 4.35M 10s
  1150K .......... .......... .......... .......... ..........  9% 1.86M 9s
  1200K .......... .......... .......... .......... ..........  9% 1.62M 9s
  1250K .......... .......... .......... .......... .......... 10% 4.23M 9s
  1300K .......... .......... .......... .......... .......... 10% 1.77M 9s
  1350K .......... .......... .......... .......... .......... 10% 2.48M 9s
  1400K .......... .......... .......... .......... .......... 11% 2.52M 8s
  1450K .......... .......... .......... .......... .......... 11% 6.09M 8s
  1500K .......... .......... .......... .......... .......... 11% 1.95M 8s
  1550K .......... .......... .......... .......... .......... 12% 2.75M 8s
  1600K .......... .......... .......... .......... .......... 12% 2.52M 8s
  1650K .......... .......... .......... .......... .......... 13% 2.87M 8s
  1700K .......... .......... .......... .......... .......... 13% 1.16M 8s
  1750K .......... .......... .......... .......... .......... 13% 8.71M 7s
  1800K .......... .......... .......... .......... .......... 14% 1.33M 7s
  1850K .......... .......... .......... .......... .......... 14% 5.05M 7s
  1900K .......... .......... .......... .......... .......... 15% 1.05M 7s
  1950K .......... .......... .......... .......... .......... 15% 7.95M 7s
  2000K .......... .......... .......... .......... .......... 15% 9.33M 7s
  2050K .......... .......... .......... .......... .......... 16% 1.18M 7s
  2100K .......... .......... .......... .......... .......... 16% 7.20M 7s
  2150K .......... .......... .......... .......... .......... 16% 1.15M 7s
  2200K .......... .......... .......... .......... .......... 17% 9.24M 7s
  2250K .......... .......... .......... .......... .......... 17% 5.97M 7s
  2300K .......... .......... .......... .......... .......... 18% 1.26M 7s
  2350K .......... .......... .......... .......... .......... 18% 5.89M 6s
  2400K .......... .......... .......... .......... .......... 18% 1006K 6s
  2450K .......... .......... .......... .......... .......... 19% 11.9M 6s
  2500K .......... .......... .......... .......... .......... 19% 5.36M 6s
  2550K .......... .......... .......... .......... .......... 20% 1.24M 6s
  2600K .......... .......... .......... .......... .......... 20% 9.54M 6s
  2650K .......... .......... .......... .......... .......... 20% 1.23M 6s
  2700K .......... .......... .......... .......... .......... 21% 11.2M 6s
  2750K .......... .......... .......... .......... .......... 21% 1.44M 6s
  2800K .......... .......... .......... .......... .......... 21% 6.87M 6s
  2850K .......... .......... .......... .......... .......... 22% 4.00M 6s
  2900K .......... .......... .......... .......... .......... 22% 1.01M 6s
  2950K .......... .......... .......... .......... .......... 23% 7.18M 6s
  3000K .......... .......... .......... .......... .......... 23% 9.02M 6s
  3050K .......... .......... .......... .......... .......... 23%  738K 6s
  3100K .......... .......... .......... .......... .......... 24% 9.48M 6s
  3150K .......... .......... .......... .......... .......... 24% 1012K 6s
  3200K .......... .......... .......... .......... .......... 25% 5.94M 6s
  3250K .......... .......... .......... .......... .......... 25% 4.12M 5s
  3300K .......... .......... .......... .......... .......... 25% 1.71M 5s
  3350K .......... .......... .......... .......... .......... 26% 9.53M 5s
  3400K .......... .......... .......... .......... .......... 26% 1.15M 5s
  3450K .......... .......... .......... .......... .......... 26% 6.98M 5s
  3500K .......... .......... .......... .......... .......... 27% 6.62M 5s
  3550K .......... .......... .......... .......... .......... 27% 1.41M 5s
  3600K .......... .......... .......... .......... .......... 28% 7.55M 5s
  3650K .......... .......... .......... .......... .......... 28% 1.45M 5s
  3700K .......... .......... .......... .......... .......... 28% 3.97M 5s
  3750K .......... .......... .......... .......... .......... 29% 5.11M 5s
  3800K .......... .......... .......... .......... .......... 29% 1.44M 5s
  3850K .......... .......... .......... .......... .......... 30% 7.40M 5s
  3900K .......... .......... .......... .......... .......... 30% 9.47M 5s
  3950K .......... .......... .......... .......... .......... 30% 1.27M 5s
  4000K .......... .......... .......... .......... .......... 31% 4.58M 5s
  4050K .......... .......... .......... .......... .......... 31% 9.49M 5s
  4100K .......... .......... .......... .......... .......... 31% 1.11M 5s
  4150K .......... .......... .......... .......... .......... 32% 17.2M 5s
  4200K .......... .......... .......... .......... .......... 32% 6.72M 5s
  4250K .......... .......... .......... .......... .......... 33% 1.59M 5s
  4300K .......... .......... .......... .......... .......... 33% 3.58M 4s
  4350K .......... .......... .......... .......... .......... 33% 5.64M 4s
  4400K .......... .......... .......... .......... .......... 34% 2.29M 4s
  4450K .......... .......... .......... .......... .......... 34% 6.83M 4s
  4500K .......... .......... .......... .......... .......... 35% 3.74M 4s
  4550K .......... .......... .......... .......... .......... 35% 2.51M 4s
  4600K .......... .......... .......... .......... .......... 35% 6.63M 4s
  4650K .......... .......... .......... .......... .......... 36% 4.95M 4s
  4700K .......... .......... .......... .......... .......... 36% 2.77M 4s
  4750K .......... .......... .......... .......... .......... 36% 5.30M 4s
  4800K .......... .......... .......... .......... .......... 37% 2.03M 4s
  4850K .......... .......... .......... .......... .......... 37% 7.89M 4s
  4900K .......... .......... .......... .......... .......... 38% 1.84M 4s
  4950K .......... .......... .......... .......... .......... 38% 4.66M 4s
  5000K .......... .......... .......... .......... .......... 38% 6.43M 4s
  5050K .......... .......... .......... .......... .......... 39% 2.57M 4s
  5100K .......... .......... .......... .......... .......... 39% 7.50M 4s
  5150K .......... .......... .......... .......... .......... 40% 2.79M 4s
  5200K .......... .......... .......... .......... .......... 40% 3.50M 4s
  5250K .......... .......... .......... .......... .......... 40% 7.64M 4s
  5300K .......... .......... .......... .......... .......... 41% 2.50M 4s
  5350K .......... .......... .......... .......... .......... 41% 2.93M 4s
  5400K .......... .......... .......... .......... .......... 41% 3.86M 4s
  5450K .......... .......... .......... .......... .......... 42% 3.13M 3s
  5500K .......... .......... .......... .......... .......... 42% 21.8M 3s
  5550K .......... .......... .......... .......... .......... 43% 2.00M 3s
  5600K .......... .......... .......... .......... .......... 43% 4.89M 3s
  5650K .......... .......... .......... .......... .......... 43% 6.02M 3s
  5700K .......... .......... .......... .......... .......... 44% 3.89M 3s
  5750K .......... .......... .......... .......... .......... 44% 4.67M 3s
  5800K .......... .......... .......... .......... .......... 45% 2.54M 3s
  5850K .......... .......... .......... .......... .......... 45% 6.49M 3s
  5900K .......... .......... .......... .......... .......... 45% 4.37M 3s
  5950K .......... .......... .......... .......... .......... 46% 9.22M 3s
  6000K .......... .......... .......... .......... .......... 46% 1.92M 3s
  6050K .......... .......... .......... .......... .......... 47% 7.10M 3s
  6100K .......... .......... .......... .......... .......... 47% 2.13M 3s
  6150K .......... .......... .......... .......... .......... 47% 7.64M 3s
  6200K .......... .......... .......... .......... .......... 48% 5.15M 3s
  6250K .......... .......... .......... .......... .......... 48% 2.10M 3s
  6300K .......... .......... .......... .......... .......... 48% 7.43M 3s
  6350K .......... .......... .......... .......... .......... 49% 3.95M 3s
  6400K .......... .......... .......... .......... .......... 49% 2.29M 3s
  6450K .......... .......... .......... .......... .......... 50% 7.61M 3s
  6500K .......... .......... .......... .......... .......... 50%  987K 3s
  6550K .......... .......... .......... .......... .......... 50% 9.23M 3s
  6600K .......... .......... .......... .......... .......... 51% 6.73M 3s
  6650K .......... .......... .......... .......... .......... 51% 4.00M 3s
  6700K .......... .......... .......... .......... .......... 52% 1.25M 3s
  6750K .......... .......... .......... .......... .......... 52% 10.2M 3s
  6800K .......... .......... .......... .......... .......... 52% 6.20M 3s
  6850K .......... .......... .......... .......... .......... 53% 1.97M 3s
  6900K .......... .......... .......... .......... .......... 53% 5.65M 3s
  6950K .......... .......... .......... .......... .......... 53% 7.27M 3s
  7000K .......... .......... .......... .......... .......... 54% 7.13M 3s
  7050K .......... .......... .......... .......... .......... 54% 2.40M 2s
  7100K .......... .......... .......... .......... .......... 55% 1.87M 2s
  7150K .......... .......... .......... .......... .......... 55% 8.93M 2s
  7200K .......... .......... .......... .......... .......... 55% 9.24M 2s
  7250K .......... .......... .......... .......... .......... 56% 1.07M 2s
  7300K .......... .......... .......... .......... .......... 56% 9.77M 2s
  7350K .......... .......... .......... .......... .......... 57% 7.14M 2s
  7400K .......... .......... .......... .......... .......... 57% 1.91M 2s
  7450K .......... .......... .......... .......... .......... 57% 6.01M 2s
  7500K .......... .......... .......... .......... .......... 58% 9.84M 2s
  7550K .......... .......... .......... .......... .......... 58% 2.02M 2s
  7600K .......... .......... .......... .......... .......... 58% 8.78M 2s
  7650K .......... .......... .......... .......... .......... 59% 6.93M 2s
  7700K .......... .......... .......... .......... .......... 59% 3.38M 2s
  7750K .......... .......... .......... .......... .......... 60% 2.54M 2s
  7800K .......... .......... .......... .......... .......... 60% 3.07M 2s
  7850K .......... .......... .......... .......... .......... 60% 2.20M 2s
  7900K .......... .......... .......... .......... .......... 61% 7.82M 2s
  7950K .......... .......... .......... .......... .......... 61% 3.56M 2s
  8000K .......... .......... .......... .......... .......... 62% 11.3M 2s
  8050K .......... .......... .......... .......... .......... 62% 5.30M 2s
  8100K .......... .......... .......... .......... .......... 62% 5.90M 2s
  8150K .......... .......... .......... .......... .......... 63% 2.72M 2s
  8200K .......... .......... .......... .......... .......... 63% 6.25M 2s
  8250K .......... .......... .......... .......... .......... 63% 3.69M 2s
  8300K .......... .......... .......... .......... .......... 64% 4.36M 2s
  8350K .......... .......... .......... .......... .......... 64% 3.27M 2s
  8400K .......... .......... .......... .......... .......... 65% 3.84M 2s
  8450K .......... .......... .......... .......... .......... 65% 1.00M 2s
  8500K .......... .......... .......... .......... .......... 65% 6.73M 2s
  8550K .......... .......... .......... .......... .......... 66% 1.89M 2s
  8600K .......... .......... .......... .......... .......... 66% 6.59M 2s
  8650K .......... .......... .......... .......... .......... 67% 1002K 2s
  8700K .......... .......... .......... .......... .......... 67% 6.60M 2s
  8750K .......... .......... .......... .......... .......... 67% 5.38M 2s
  8800K .......... .......... .......... .......... .......... 68% 5.38M 2s
  8850K .......... .......... .......... .......... .......... 68% 3.83M 2s
  8900K .......... .......... .......... .......... .......... 68% 2.62M 2s
  8950K .......... .......... .......... .......... .......... 69% 2.31M 2s
  9000K .......... .......... .......... .......... .......... 69% 3.00M 2s
  9050K .......... .......... .......... .......... .......... 70% 4.77M 2s
  9100K .......... .......... .......... .......... .......... 70% 9.10M 2s
  9150K .......... .......... .......... .......... .......... 70% 4.15M 1s
  9200K .......... .......... .......... .......... .......... 71%  588K 1s
  9250K .......... .......... .......... .......... .......... 71% 26.8M 1s
  9300K .......... .......... .......... .......... .......... 72% 3.30M 1s
  9350K .......... .......... .......... .......... .......... 72% 31.5M 1s
  9400K .......... .......... .......... .......... .......... 72% 2.35M 1s
  9450K .......... .......... .......... .......... .......... 73% 6.84M 1s
  9500K .......... .......... .......... .......... .......... 73% 5.02M 1s
  9550K .......... .......... .......... .......... .......... 73% 3.05M 1s
  9600K .......... .......... .......... .......... .......... 74% 9.09M 1s
  9650K .......... .......... .......... .......... .......... 74% 6.45M 1s
  9700K .......... .......... .......... .......... .......... 75% 2.12M 1s
  9750K .......... .......... .......... .......... .......... 75% 6.36M 1s
  9800K .......... .......... .......... .......... .......... 75% 7.55M 1s
  9850K .......... .......... .......... .......... .......... 76% 3.32M 1s
  9900K .......... .......... .......... .......... .......... 76% 3.74M 1s
  9950K .......... .......... .......... .......... .......... 77% 3.34M 1s
 10000K .......... .......... .......... .......... .......... 77% 4.57M 1s
 10050K .......... .......... .......... .......... .......... 77% 21.3M 1s
 10100K .......... .......... .......... .......... .......... 78% 1.65M 1s
 10150K .......... .......... .......... .......... .......... 78% 6.88M 1s
 10200K .......... .......... .......... .......... .......... 78% 9.21M 1s
 10250K .......... .......... .......... .......... .......... 79% 4.20M 1s
 10300K .......... .......... .......... .......... .......... 79% 5.01M 1s
 10350K .......... .......... .......... .......... .......... 80% 2.54M 1s
 10400K .......... .......... .......... .......... .......... 80% 4.79M 1s
 10450K .......... .......... .......... .......... .......... 80% 6.33M 1s
 10500K .......... .......... .......... .......... .......... 81% 8.34M 1s
 10550K .......... .......... .......... .......... .......... 81% 2.35M 1s
 10600K .......... .......... .......... .......... .......... 82% 5.71M 1s
 10650K .......... .......... .......... .......... .......... 82% 9.81M 1s
 10700K .......... .......... .......... .......... .......... 82% 1.98M 1s
 10750K .......... .......... .......... .......... .......... 83% 9.54M 1s
 10800K .......... .......... .......... .......... .......... 83% 3.29M 1s
 10850K .......... .......... .......... .......... .......... 83% 4.42M 1s
 10900K .......... .......... .......... .......... .......... 84% 3.39M 1s
 10950K .......... .......... .......... .......... .......... 84% 1006K 1s
 11000K .......... .......... .......... .......... .......... 85% 8.93M 1s
 11050K .......... .......... .......... .......... .......... 85% 2.02M 1s
 11100K .......... .......... .......... .......... .......... 85%  468M 1s
 11150K .......... .......... .......... .......... .......... 86% 5.12M 1s
 11200K .......... .......... .......... .......... .......... 86% 4.24M 1s
 11250K .......... .......... .......... .......... .......... 87% 3.16M 1s
 11300K .......... .......... .......... .......... .......... 87% 4.89M 1s
 11350K .......... .......... .......... .......... .......... 87% 8.38M 1s
 11400K .......... .......... .......... .......... .......... 88%  779K 1s
 11450K .......... .......... .......... .......... .......... 88%  203M 1s
 11500K .......... .......... .......... .......... .......... 89% 9.44M 1s
 11550K .......... .......... .......... .......... .......... 89% 8.50M 1s
 11600K .......... .......... .......... .......... .......... 89% 3.72M 0s
 11650K .......... .......... .......... .......... .......... 90% 2.53M 0s
 11700K .......... .......... .......... .......... .......... 90% 7.03M 0s
 11750K .......... .......... .......... .......... .......... 90% 2.79M 0s
 11800K .......... .......... .......... .......... .......... 91% 5.42M 0s
 11850K .......... .......... .......... .......... .......... 91% 8.36M 0s
 11900K .......... .......... .......... .......... .......... 92% 4.84M 0s
 11950K .......... .......... .......... .......... .......... 92% 3.96M 0s
 12000K .......... .......... .......... .......... .......... 92% 8.38M 0s
 12050K .......... .......... .......... .......... .......... 93% 3.22M 0s
 12100K .......... .......... .......... .......... .......... 93% 8.76M 0s
 12150K .......... .......... .......... .......... .......... 94% 3.43M 0s
 12200K .......... .......... .......... .......... .......... 94% 8.92M 0s
 12250K .......... .......... .......... .......... .......... 94% 2.04M 0s
 12300K .......... .......... .......... .......... .......... 95% 2.10M 0s
 12350K .......... .......... .......... .......... .......... 95%  122M 0s
 12400K .......... .......... .......... .......... .......... 95% 4.42M 0s
 12450K .......... .......... .......... .......... .......... 96% 12.5M 0s
 12500K .......... .......... .......... .......... .......... 96% 1.68M 0s
 12550K .......... .......... .......... .......... .......... 97% 5.48M 0s
 12600K .......... .......... .......... .......... .......... 97% 8.34M 0s
 12650K .......... .......... .......... .......... .......... 97% 4.38M 0s
 12700K .......... .......... .......... .......... .......... 98% 7.69M 0s
 12750K .......... .......... .......... .......... .......... 98% 4.38M 0s
 12800K .......... .......... .......... .......... .......... 99% 3.24M 0s
 12850K .......... .......... .......... .......... .......... 99% 6.11M 0s
 12900K .......... .......... .......... .......... .......... 99% 3.70M 0s
 12950K .......... .......... ......                          100% 18.2M=4.6s

2016-05-01 02:26:12 (2.74 MB/s) - ‘cirros-0.3.4-x86_64-disk.img’ saved [13287936/13287936]

+ echo 'export OS_IMAGE_API_VERSION=2' ' '
+ tee -a admin-openrc demo-openrc
export OS_IMAGE_API_VERSION=2  
+ . admin-openrc
++ export OS_PROJECT_DOMAIN_NAME=default
++ OS_PROJECT_DOMAIN_NAME=default
++ export OS_USER_DOMAIN_NAME=default
++ OS_USER_DOMAIN_NAME=default
++ export OS_PROJECT_NAME=admin
++ OS_PROJECT_NAME=admin
++ export OS_USERNAME=admin
++ OS_USERNAME=admin
++ export OS_PASSWORD=Super123
++ OS_PASSWORD=Super123
++ export OS_AUTH_URL=http://controller:35357/v3
++ OS_AUTH_URL=http://controller:35357/v3
++ export OS_IDENTITY_API_VERSION=3
++ OS_IDENTITY_API_VERSION=3
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
+ glance image-create --name cirros --file cirros-0.3.4-x86_64-disk.img --disk-format qcow2 --container-format bare --visibility public --progress
+------------------+--------------------------------------+
| Property         | Value                                |
+------------------+--------------------------------------+
| checksum         | ee1eca47dc88f4879d8a229cc70a07c6     |
| container_format | bare                                 |
| created_at       | 2016-05-01T09:26:12Z                 |
| disk_format      | qcow2                                |
| id               | 02de81d7-b87f-487d-b1a8-888c8ac10295 |
| min_disk         | 0                                    |
| min_ram          | 0                                    |
| name             | cirros                               |
| owner            | 74785c59ee5b46d28c6532e645a94031     |
| protected        | False                                |
| size             | 13287936                             |
| status           | active                               |
| tags             | []                                   |
| updated_at       | 2016-05-01T09:26:13Z                 |
| virtual_size     | None                                 |
| visibility       | public                               |
+------------------+--------------------------------------+
+ glance image-list
+--------------------------------------+--------+
| ID                                   | Name   |
+--------------------------------------+--------+
| 02de81d7-b87f-487d-b1a8-888c8ac10295 | cirros |
+--------------------------------------+--------+
+ glaneceResult=0
+ [[ '' -eq 1 ]]
+ echo 'Pass glance service installation'
Pass glance service installation
+ rm -f cirros-0.3.4-x86_64-disk.img
+ exit 0
