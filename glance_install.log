+ cd /root/work/glance_service
+ firewall-cmd --add-port=9292/tcp --permanent
success
+ firewall-cmd --reload
success
+ mysql -u root -pSuper123
+ . admin-openrc
++ export OS_PROJECT_DOMAIN_NAME=default
++ OS_PROJECT_DOMAIN_NAME=default
++ export OS_USER_DOMAIN_NAME=default
++ OS_USER_DOMAIN_NAME=default
++ export OS_PROJECT_NAME=admin
++ OS_PROJECT_NAME=admin
++ export OS_USERNAME=admin
++ OS_USERNAME=admin
++ export OS_PASSWORD=Super123
++ OS_PASSWORD=Super123
++ export OS_AUTH_URL=http://controller:35357/v3
++ OS_AUTH_URL=http://controller:35357/v3
++ export OS_IDENTITY_API_VERSION=3
++ OS_IDENTITY_API_VERSION=3
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
+ yum -y install expect
+ openstack user create --domain default --password Super123 glance
+-----------+----------------------------------+
| Field     | Value                            |
+-----------+----------------------------------+
| domain_id | db50924faea245dc8200a639e5f8d461 |
| enabled   | True                             |
| id        | 27e821c87b414fb99eaed5d7217a9a41 |
| name      | glance                           |
+-----------+----------------------------------+
+ openstack role add --project service --user glance admin
+ openstack service create --name glance --description 'OpenStack Image service' image
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | OpenStack Image service          |
| enabled     | True                             |
| id          | ed35926368564c4da7c7a64ceb9e0225 |
| name        | glance                           |
| type        | image                            |
+-------------+----------------------------------+
+ openstack endpoint create --region RegionOne image public http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | ad881e120364445caea02884f3d4804c |
| interface    | public                           |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | ed35926368564c4da7c7a64ceb9e0225 |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+
+ openstack endpoint create --region RegionOne image internal http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | 423925f8021544bda520b06c0e0ceb73 |
| interface    | internal                         |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | ed35926368564c4da7c7a64ceb9e0225 |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+
+ openstack endpoint create --region RegionOne image admin http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | 6114536f9ffe47e2bce0e8f2a726928a |
| interface    | admin                            |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | ed35926368564c4da7c7a64ceb9e0225 |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+
+ echo 'installing glance package on controller'
installing glance package on controller
+ yum -y install openstack-glance wget
+ openstack-config --set /etc/glance/glance-api.conf database connection mysql+pymysql://glance:Super123@controller/glance
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_uri http://controller:5000
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_url http://controller:35357
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken memcached_servers controller:11211
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_type password
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken project_domain_name default
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken user_domain_name default
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken project_name service
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken username glance
+ openstack-config --set /etc/glance/glance-api.conf keystone_authtoken password Super123
+ openstack-config --set /etc/glance/glance-api.conf paste_deploy flavor keystone
+ openstack-config --set /etc/glance/glance-api.conf glance_store default_store file
+ openstack-config --set /etc/glance/glance-api.conf glance_store store file,http
+ openstack-config --set /etc/glance/glance-api.conf glance_store filesystem_store_datadir /var/lib/glance/images/
+ openstack-config --set /etc/glance/glance-api.conf DEFAULT verbose True
+ openstack-config --set /etc/glance/glance-registry.conf database connection mysql+pymysql://glance:Super123@controller/glance
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_uri http://controller:5000
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_url http://controller:35357
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken memcached_servers controller:11211
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_type password
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken project_domain_name default
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken user_domain_name default
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken project_name service
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken username glance
+ openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken password Super123
+ openstack-config --set /etc/glance/glance-registry.conf paste_deploy flavor keystone
+ openstack-config --set /etc/glance/glance-registry.conf DEFAULT verbose True
+ su -s /bin/sh -c 'glance-manage db_sync' glance
Option "verbose" from group "DEFAULT" is deprecated for removal.  Its value may be silently ignored in the future.
/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py:1056: OsloDBDeprecationWarning: EngineFacade is deprecated; please use oslo_db.sqlalchemy.enginefacade
  expire_on_commit=expire_on_commit, _conf=conf)
/usr/lib/python2.7/site-packages/pymysql/cursors.py:146: Warning: Duplicate index 'ix_image_properties_image_id_name' defined on the table 'glance.image_properties'. This is deprecated and will be disallowed in a future release.
  result = self._query(query)
+ systemctl enable openstack-glance-api.service openstack-glance-registry.service
Created symlink from /etc/systemd/system/multi-user.target.wants/openstack-glance-api.service to /usr/lib/systemd/system/openstack-glance-api.service.
Created symlink from /etc/systemd/system/multi-user.target.wants/openstack-glance-registry.service to /usr/lib/systemd/system/openstack-glance-registry.service.
+ systemctl start openstack-glance-api.service openstack-glance-registry.service
+ wget http://download.cirros-cloud.net/0.3.4/cirros-0.3.4-x86_64-disk.img
--2016-04-30 00:41:37--  http://download.cirros-cloud.net/0.3.4/cirros-0.3.4-x86_64-disk.img
Resolving download.cirros-cloud.net (download.cirros-cloud.net)... 64.90.42.85
Connecting to download.cirros-cloud.net (download.cirros-cloud.net)|64.90.42.85|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 13287936 (13M) [text/plain]
Saving to: ‘cirros-0.3.4-x86_64-disk.img’

     0K .......... .......... .......... .......... ..........  0%  434K 30s
    50K .......... .......... .......... .......... ..........  0%  487K 28s
   100K .......... .......... .......... .......... ..........  1%  766K 24s
   150K .......... .......... .......... .......... ..........  1%  706K 23s
   200K .......... .......... .......... .......... ..........  1% 1.23M 20s
   250K .......... .......... .......... .......... ..........  2% 1.04M 19s
   300K .......... .......... .......... .......... ..........  2%  780K 18s
   350K .......... .......... .......... .......... ..........  3%  648K 18s
   400K .......... .......... .......... .......... ..........  3% 1.28M 17s
   450K .......... .......... .......... .......... ..........  3% 1.45M 16s
   500K .......... .......... .......... .......... ..........  4% 2.19M 15s
   550K .......... .......... .......... .......... ..........  4% 2.36M 14s
   600K .......... .......... .......... .......... ..........  5% 1.46M 14s
   650K .......... .......... .......... .......... ..........  5% 1.01M 14s
   700K .......... .......... .......... .......... ..........  5% 1.24M 13s
   750K .......... .......... .......... .......... ..........  6% 10.2M 13s
   800K .......... .......... .......... .......... ..........  6% 1.32M 12s
   850K .......... .......... .......... .......... ..........  6% 1.19M 12s
   900K .......... .......... .......... .......... ..........  7% 9.88M 11s
   950K .......... .......... .......... .......... ..........  7% 1.19M 11s
  1000K .......... .......... .......... .......... ..........  8% 1.29M 11s
  1050K .......... .......... .......... .......... ..........  8% 6.05M 11s
  1100K .......... .......... .......... .......... ..........  8% 1.38M 11s
  1150K .......... .......... .......... .......... ..........  9% 8.67M 10s
  1200K .......... .......... .......... .......... ..........  9% 1.33M 10s
  1250K .......... .......... .......... .......... .......... 10% 1.13M 10s
  1300K .......... .......... .......... .......... .......... 10% 4.31M 10s
  1350K .......... .......... .......... .......... .......... 10% 1.16M 10s
  1400K .......... .......... .......... .......... .......... 11% 8.09M 9s
  1450K .......... .......... .......... .......... .......... 11% 1013K 9s
  1500K .......... .......... .......... .......... .......... 11% 4.61M 9s
  1550K .......... .......... .......... .......... .......... 12% 1.16M 9s
  1600K .......... .......... .......... .......... .......... 12% 11.0M 9s
  1650K .......... .......... .......... .......... .......... 13% 1.14M 9s
  1700K .......... .......... .......... .......... .......... 13% 1012K 9s
  1750K .......... .......... .......... .......... .......... 13% 9.64M 9s
  1800K .......... .......... .......... .......... .......... 14% 1.27M 9s
  1850K .......... .......... .......... .......... .......... 14% 8.64M 8s
  1900K .......... .......... .......... .......... .......... 15% 1.33M 8s
  1950K .......... .......... .......... .......... .......... 15% 6.99M 8s
  2000K .......... .......... .......... .......... .......... 15% 1.27M 8s
  2050K .......... .......... .......... .......... .......... 16% 6.38M 8s
  2100K .......... .......... .......... .......... .......... 16% 1.30M 8s
  2150K .......... .......... .......... .......... .......... 16% 10.1M 8s
  2200K .......... .......... .......... .......... .......... 17% 1.23M 8s
  2250K .......... .......... .......... .......... .......... 17% 6.16M 7s
  2300K .......... .......... .......... .......... .......... 18% 1.59M 7s
  2350K .......... .......... .......... .......... .......... 18% 3.46M 7s
  2400K .......... .......... .......... .......... .......... 18% 2.28M 7s
  2450K .......... .......... .......... .......... .......... 19% 3.05M 7s
  2500K .......... .......... .......... .......... .......... 19% 2.09M 7s
  2550K .......... .......... .......... .......... .......... 20% 3.17M 7s
  2600K .......... .......... .......... .......... .......... 20% 2.64M 7s
  2650K .......... .......... .......... .......... .......... 20% 1.71M 7s
  2700K .......... .......... .......... .......... .......... 21% 2.76M 7s
  2750K .......... .......... .......... .......... .......... 21% 2.55M 7s
  2800K .......... .......... .......... .......... .......... 21% 1.21M 7s
  2850K .......... .......... .......... .......... .......... 22% 4.87M 6s
  2900K .......... .......... .......... .......... .......... 22% 28.2M 6s
  2950K .......... .......... .......... .......... .......... 23% 1.09M 6s
  3000K .......... .......... .......... .......... .......... 23% 8.86M 6s
  3050K .......... .......... .......... .......... .......... 23% 1.25M 6s
  3100K .......... .......... .......... .......... .......... 24% 8.92M 6s
  3150K .......... .......... .......... .......... .......... 24% 8.03M 6s
  3200K .......... .......... .......... .......... .......... 25% 1.37M 6s
  3250K .......... .......... .......... .......... .......... 25% 8.78M 6s
  3300K .......... .......... .......... .......... .......... 25% 1.34M 6s
  3350K .......... .......... .......... .......... .......... 26% 3.15M 6s
  3400K .......... .......... .......... .......... .......... 26% 1.19M 6s
  3450K .......... .......... .......... .......... .......... 26% 6.93M 6s
  3500K .......... .......... .......... .......... .......... 27% 5.01M 6s
  3550K .......... .......... .......... .......... .......... 27% 1.44M 6s
  3600K .......... .......... .......... .......... .......... 28% 7.66M 5s
  3650K .......... .......... .......... .......... .......... 28% 1.12M 5s
  3700K .......... .......... .......... .......... .......... 28% 5.51M 5s
  3750K .......... .......... .......... .......... .......... 29% 9.99M 5s
  3800K .......... .......... .......... .......... .......... 29% 1.36M 5s
  3850K .......... .......... .......... .......... .......... 30% 9.16M 5s
  3900K .......... .......... .......... .......... .......... 30% 1.08M 5s
  3950K .......... .......... .......... .......... .......... 30% 8.78M 5s
  4000K .......... .......... .......... .......... .......... 31% 8.89M 5s
  4050K .......... .......... .......... .......... .......... 31% 1.18M 5s
  4100K .......... .......... .......... .......... .......... 31% 9.91M 5s
  4150K .......... .......... .......... .......... .......... 32% 1.96M 5s
  4200K .......... .......... .......... .......... .......... 32% 2.05M 5s
  4250K .......... .......... .......... .......... .......... 33% 9.13M 5s
  4300K .......... .......... .......... .......... .......... 33% 1.24M 5s
  4350K .......... .......... .......... .......... .......... 33% 9.30M 5s
  4400K .......... .......... .......... .......... .......... 34% 3.78M 5s
  4450K .......... .......... .......... .......... .......... 34% 1.33M 5s
  4500K .......... .......... .......... .......... .......... 35% 4.74M 5s
  4550K .......... .......... .......... .......... .......... 35% 1.51M 5s
  4600K .......... .......... .......... .......... .......... 35% 7.22M 5s
  4650K .......... .......... .......... .......... .......... 36% 1.33M 5s
  4700K .......... .......... .......... .......... .......... 36% 9.38M 4s
  4750K .......... .......... .......... .......... .......... 36% 2.89M 4s
  4800K .......... .......... .......... .......... .......... 37%  944K 4s
  4850K .......... .......... .......... .......... .......... 37% 4.31M 4s
  4900K .......... .......... .......... .......... .......... 38% 11.5M 4s
  4950K .......... .......... .......... .......... .......... 38% 1.01M 4s
  5000K .......... .......... .......... .......... .......... 38% 4.90M 4s
  5050K .......... .......... .......... .......... .......... 39% 1.69M 4s
  5100K .......... .......... .......... .......... .......... 39% 5.81M 4s
  5150K .......... .......... .......... .......... .......... 40% 9.39M 4s
  5200K .......... .......... .......... .......... .......... 40% 1.16M 4s
  5250K .......... .......... .......... .......... .......... 40% 9.75M 4s
  5300K .......... .......... .......... .......... .......... 41% 8.14M 4s
  5350K .......... .......... .......... .......... .......... 41% 1.25M 4s
  5400K .......... .......... .......... .......... .......... 41% 9.89M 4s
  5450K .......... .......... .......... .......... .......... 42% 7.44M 4s
  5500K .......... .......... .......... .......... .......... 42% 1.36M 4s
  5550K .......... .......... .......... .......... .......... 43% 9.64M 4s
  5600K .......... .......... .......... .......... .......... 43% 1.25M 4s
  5650K .......... .......... .......... .......... .......... 43% 5.66M 4s
  5700K .......... .......... .......... .......... .......... 44% 4.52M 4s
  5750K .......... .......... .......... .......... .......... 44% 1.14M 4s
  5800K .......... .......... .......... .......... .......... 45% 7.60M 4s
  5850K .......... .......... .......... .......... .......... 45% 8.60M 4s
  5900K .......... .......... .......... .......... .......... 45% 1.16M 4s
  5950K .......... .......... .......... .......... .......... 46% 9.06M 4s
  6000K .......... .......... .......... .......... .......... 46% 6.05M 4s
  6050K .......... .......... .......... .......... .......... 47% 1.41M 4s
  6100K .......... .......... .......... .......... .......... 47% 4.07M 3s
  6150K .......... .......... .......... .......... .......... 47% 4.79M 3s
  6200K .......... .......... .......... .......... .......... 48% 1.78M 3s
  6250K .......... .......... .......... .......... .......... 48% 6.04M 3s
  6300K .......... .......... .......... .......... .......... 48% 1.34M 3s
  6350K .......... .......... .......... .......... .......... 49% 6.15M 3s
  6400K .......... .......... .......... .......... .......... 49% 9.05M 3s
  6450K .......... .......... .......... .......... .......... 50% 2.38M 3s
  6500K .......... .......... .......... .......... .......... 50% 1.94M 3s
  6550K .......... .......... .......... .......... .......... 50% 5.87M 3s
  6600K .......... .......... .......... .......... .......... 51% 7.54M 3s
  6650K .......... .......... .......... .......... .......... 51% 1.72M 3s
  6700K .......... .......... .......... .......... .......... 52% 3.46M 3s
  6750K .......... .......... .......... .......... .......... 52% 8.98M 3s
  6800K .......... .......... .......... .......... .......... 52% 1.82M 3s
  6850K .......... .......... .......... .......... .......... 53% 10.5M 3s
  6900K .......... .......... .......... .......... .......... 53% 6.10M 3s
  6950K .......... .......... .......... .......... .......... 53% 1.91M 3s
  7000K .......... .......... .......... .......... .......... 54% 6.92M 3s
  7050K .......... .......... .......... .......... .......... 54% 1.80M 3s
  7100K .......... .......... .......... .......... .......... 55% 1.11M 3s
  7150K .......... .......... .......... .......... .......... 55% 7.24M 3s
  7200K .......... .......... .......... .......... .......... 55% 7.44M 3s
  7250K .......... .......... .......... .......... .......... 56% 4.35M 3s
  7300K .......... .......... .......... .......... .......... 56% 1.96M 3s
  7350K .......... .......... .......... .......... .......... 57% 7.12M 3s
  7400K .......... .......... .......... .......... .......... 57% 5.92M 3s
  7450K .......... .......... .......... .......... .......... 57% 2.08M 3s
  7500K .......... .......... .......... .......... .......... 58% 2.79M 3s
  7550K .......... .......... .......... .......... .......... 58% 13.0M 3s
  7600K .......... .......... .......... .......... .......... 58% 2.57M 3s
  7650K .......... .......... .......... .......... .......... 59% 3.73M 2s
  7700K .......... .......... .......... .......... .......... 59% 6.17M 2s
  7750K .......... .......... .......... .......... .......... 60% 7.65M 2s
  7800K .......... .......... .......... .......... .......... 60% 1.85M 2s
  7850K .......... .......... .......... .......... .......... 60% 2.39M 2s
  7900K .......... .......... .......... .......... .......... 61% 7.90M 2s
  7950K .......... .......... .......... .......... .......... 61% 2.86M 2s
  8000K .......... .......... .......... .......... .......... 62% 8.22M 2s
  8050K .......... .......... .......... .......... .......... 62% 3.15M 2s
  8100K .......... .......... .......... .......... .......... 62% 6.44M 2s
  8150K .......... .......... .......... .......... .......... 63% 3.61M 2s
  8200K .......... .......... .......... .......... .......... 63% 1.63M 2s
  8250K .......... .......... .......... .......... .......... 63% 4.72M 2s
  8300K .......... .......... .......... .......... .......... 64% 4.64M 2s
  8350K .......... .......... .......... .......... .......... 64% 4.06M 2s
  8400K .......... .......... .......... .......... .......... 65% 2.31M 2s
  8450K .......... .......... .......... .......... .......... 65% 9.04M 2s
  8500K .......... .......... .......... .......... .......... 65% 4.72M 2s
  8550K .......... .......... .......... .......... .......... 66% 1.27M 2s
  8600K .......... .......... .......... .......... .......... 66% 6.34M 2s
  8650K .......... .......... .......... .......... .......... 67% 8.45M 2s
  8700K .......... .......... .......... .......... .......... 67% 2.10M 2s
  8750K .......... .......... .......... .......... .......... 67% 6.23M 2s
  8800K .......... .......... .......... .......... .......... 68% 3.46M 2s
  8850K .......... .......... .......... .......... .......... 68% 7.48M 2s
  8900K .......... .......... .......... .......... .......... 68% 3.86M 2s
  8950K .......... .......... .......... .......... .......... 69% 6.07M 2s
  9000K .......... .......... .......... .......... .......... 69% 2.66M 2s
  9050K .......... .......... .......... .......... .......... 70% 7.65M 2s
  9100K .......... .......... .......... .......... .......... 70% 2.91M 2s
  9150K .......... .......... .......... .......... .......... 70% 2.85M 2s
  9200K .......... .......... .......... .......... .......... 71% 9.72M 2s
  9250K .......... .......... .......... .......... .......... 71% 5.99M 2s
  9300K .......... .......... .......... .......... .......... 72% 4.70M 2s
  9350K .......... .......... .......... .......... .......... 72% 2.07M 2s
  9400K .......... .......... .......... .......... .......... 72% 8.75M 2s
  9450K .......... .......... .......... .......... .......... 73% 5.90M 1s
  9500K .......... .......... .......... .......... .......... 73% 6.34M 1s
  9550K .......... .......... .......... .......... .......... 73% 1.44M 1s
  9600K .......... .......... .......... .......... .......... 74% 10.2M 1s
  9650K .......... .......... .......... .......... .......... 74% 8.01M 1s
  9700K .......... .......... .......... .......... .......... 75% 5.53M 1s
  9750K .......... .......... .......... .......... .......... 75% 1.52M 1s
  9800K .......... .......... .......... .......... .......... 75% 9.53M 1s
  9850K .......... .......... .......... .......... .......... 76% 4.91M 1s
  9900K .......... .......... .......... .......... .......... 76% 11.2M 1s
  9950K .......... .......... .......... .......... .......... 77% 1.61M 1s
 10000K .......... .......... .......... .......... .......... 77% 8.98M 1s
 10050K .......... .......... .......... .......... .......... 77% 5.75M 1s
 10100K .......... .......... .......... .......... .......... 78% 13.0M 1s
 10150K .......... .......... .......... .......... .......... 78% 1.81M 1s
 10200K .......... .......... .......... .......... .......... 78% 9.21M 1s
 10250K .......... .......... .......... .......... .......... 79% 4.50M 1s
 10300K .......... .......... .......... .......... .......... 79% 6.28M 1s
 10350K .......... .......... .......... .......... .......... 80% 2.74M 1s
 10400K .......... .......... .......... .......... .......... 80% 2.48M 1s
 10450K .......... .......... .......... .......... .......... 80% 8.36M 1s
 10500K .......... .......... .......... .......... .......... 81% 7.12M 1s
 10550K .......... .......... .......... .......... .......... 81% 1.10M 1s
 10600K .......... .......... .......... .......... .......... 82% 1.79M 1s
 10650K .......... .......... .......... .......... .......... 82% 9.82M 1s
 10700K .......... .......... .......... .......... .......... 82% 9.22M 1s
 10750K .......... .......... .......... .......... .......... 83% 1.04M 1s
 10800K .......... .......... .......... .......... .......... 83% 6.98M 1s
 10850K .......... .......... .......... .......... .......... 83% 4.44M 1s
 10900K .......... .......... .......... .......... .......... 84% 4.57M 1s
 10950K .......... .......... .......... .......... .......... 84% 7.26M 1s
 11000K .......... .......... .......... .......... .......... 85% 1.37M 1s
 11050K .......... .......... .......... .......... .......... 85% 9.39M 1s
 11100K .......... .......... .......... .......... .......... 85% 6.41M 1s
 11150K .......... .......... .......... .......... .......... 86% 8.06M 1s
 11200K .......... .......... .......... .......... .......... 86% 1.55M 1s
 11250K .......... .......... .......... .......... .......... 87% 5.59M 1s
 11300K .......... .......... .......... .......... .......... 87% 9.30M 1s
 11350K .......... .......... .......... .......... .......... 87% 3.99M 1s
 11400K .......... .......... .......... .......... .......... 88% 2.48M 1s
 11450K .......... .......... .......... .......... .......... 88% 4.86M 1s
 11500K .......... .......... .......... .......... .......... 89% 6.13M 1s
 11550K .......... .......... .......... .......... .......... 89% 8.94M 1s
 11600K .......... .......... .......... .......... .......... 89% 3.16M 1s
 11650K .......... .......... .......... .......... .......... 90% 6.27M 1s
 11700K .......... .......... .......... .......... .......... 90% 2.96M 0s
 11750K .......... .......... .......... .......... .......... 90% 7.55M 0s
 11800K .......... .......... .......... .......... .......... 91% 4.09M 0s
 11850K .......... .......... .......... .......... .......... 91% 6.94M 0s
 11900K .......... .......... .......... .......... .......... 92% 2.17M 0s
 11950K .......... .......... .......... .......... .......... 92% 7.71M 0s
 12000K .......... .......... .......... .......... .......... 92% 7.32M 0s
 12050K .......... .......... .......... .......... .......... 93% 3.00M 0s
 12100K .......... .......... .......... .......... .......... 93% 5.84M 0s
 12150K .......... .......... .......... .......... .......... 94% 4.51M 0s
 12200K .......... .......... .......... .......... .......... 94% 4.48M 0s
 12250K .......... .......... .......... .......... .......... 94%  692K 0s
 12300K .......... .......... .......... .......... .......... 95% 11.0M 0s
 12350K .......... .......... .......... .......... .......... 95% 7.39M 0s
 12400K .......... .......... .......... .......... .......... 95% 3.66M 0s
 12450K .......... .......... .......... .......... .......... 96% 1.19M 0s
 12500K .......... .......... .......... .......... .......... 96% 93.2M 0s
 12550K .......... .......... .......... .......... .......... 97%  761K 0s
 12600K .......... .......... .......... .......... .......... 97% 2.12M 0s
 12650K .......... .......... .......... .......... .......... 97% 4.40M 0s
 12700K .......... .......... .......... .......... .......... 98% 8.35M 0s
 12750K .......... .......... .......... .......... .......... 98% 6.09M 0s
 12800K .......... .......... .......... .......... .......... 99% 1.10M 0s
 12850K .......... .......... .......... .......... .......... 99% 8.14M 0s
 12900K .......... .......... .......... .......... .......... 99% 5.17M 0s
 12950K .......... .......... ......                          100% 26.5M=5.1s

2016-04-30 00:41:43 (2.47 MB/s) - ‘cirros-0.3.4-x86_64-disk.img’ saved [13287936/13287936]

+ echo 'export OS_IMAGE_API_VERSION=2' ' '
+ tee -a admin-openrc demo-openrc
export OS_IMAGE_API_VERSION=2  
+ . admin-openrc
++ export OS_PROJECT_DOMAIN_NAME=default
++ OS_PROJECT_DOMAIN_NAME=default
++ export OS_USER_DOMAIN_NAME=default
++ OS_USER_DOMAIN_NAME=default
++ export OS_PROJECT_NAME=admin
++ OS_PROJECT_NAME=admin
++ export OS_USERNAME=admin
++ OS_USERNAME=admin
++ export OS_PASSWORD=Super123
++ OS_PASSWORD=Super123
++ export OS_AUTH_URL=http://controller:35357/v3
++ OS_AUTH_URL=http://controller:35357/v3
++ export OS_IDENTITY_API_VERSION=3
++ OS_IDENTITY_API_VERSION=3
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
+ glance image-create --name cirros --file cirros-0.3.4-x86_64-disk.img --disk-format qcow2 --container-format bare --visibility public --progress
+------------------+--------------------------------------+
| Property         | Value                                |
+------------------+--------------------------------------+
| checksum         | ee1eca47dc88f4879d8a229cc70a07c6     |
| container_format | bare                                 |
| created_at       | 2016-04-30T07:41:43Z                 |
| disk_format      | qcow2                                |
| id               | e35c79e3-48f8-46eb-baf8-beb10373bf93 |
| min_disk         | 0                                    |
| min_ram          | 0                                    |
| name             | cirros                               |
| owner            | 51f2300773b44c8b882181f7f437d15e     |
| protected        | False                                |
| size             | 13287936                             |
| status           | active                               |
| tags             | []                                   |
| updated_at       | 2016-04-30T07:41:43Z                 |
| virtual_size     | None                                 |
| visibility       | public                               |
+------------------+--------------------------------------+
+ glance image-list
+--------------------------------------+--------+
| ID                                   | Name   |
+--------------------------------------+--------+
| e35c79e3-48f8-46eb-baf8-beb10373bf93 | cirros |
+--------------------------------------+--------+
+ glaneceResult=0
+ [[ '' -eq 1 ]]
+ echo 'Pass glance service installation'
Pass glance service installation
+ rm -f cirros-0.3.4-x86_64-disk.img
+ exit 0
