Creating user "openstack" ...
...done.
Setting permissions for user "openstack" in vhost "/" ...
...done.
success
success
+ mysql -u root -pSuper123
+ . admin-openrc
++ export OS_PROJECT_DOMAIN_NAME=default
++ OS_PROJECT_DOMAIN_NAME=default
++ export OS_USER_DOMAIN_NAME=default
++ OS_USER_DOMAIN_NAME=default
++ export OS_PROJECT_NAME=admin
++ OS_PROJECT_NAME=admin
++ export OS_USERNAME=admin
++ OS_USERNAME=admin
++ export OS_PASSWORD=Super123
++ OS_PASSWORD=Super123
++ export OS_AUTH_URL=http://controller:35357/v3
++ OS_AUTH_URL=http://controller:35357/v3
++ export OS_IDENTITY_API_VERSION=3
++ OS_IDENTITY_API_VERSION=3
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
+ yum -y install expect
Loaded plugins: fastestmirror, priorities
Loading mirror speeds from cached hostfile
 * base: centos.sonn.com
 * extras: repos.dfw.quadranet.com
 * updates: linux.mirrors.es.net
424 packages excluded due to repository priority protections
Package expect-5.45-14.el7_1.x86_64 already installed and latest version
Nothing to do
+ openstack user create --domain default --password Super123 nova
+-----------+----------------------------------+
| Field     | Value                            |
+-----------+----------------------------------+
| domain_id | 1a3bc33d28d24e589145bf97dc14b345 |
| enabled   | True                             |
| id        | 0ad5950518e14ff3a0a77a0c017443ab |
| name      | nova                             |
+-----------+----------------------------------+
+ openstack role add --project service --user nova admin
+ openstack service create --name nova --description 'OpenStack Compute' compute
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | OpenStack Compute                |
| enabled     | True                             |
| id          | 839bd6344c9b4ae08e163b9485bfeac2 |
| name        | nova                             |
| type        | compute                          |
+-------------+----------------------------------+
+ openstack endpoint create --region RegionOne compute public 'http://controller:8774/v2.1/%(tenant_id)s'
+--------------+-------------------------------------------+
| Field        | Value                                     |
+--------------+-------------------------------------------+
| enabled      | True                                      |
| id           | 91b3943bb9604d3eaa6fd6fca2331a46          |
| interface    | public                                    |
| region       | RegionOne                                 |
| region_id    | RegionOne                                 |
| service_id   | 839bd6344c9b4ae08e163b9485bfeac2          |
| service_name | nova                                      |
| service_type | compute                                   |
| url          | http://controller:8774/v2.1/%(tenant_id)s |
+--------------+-------------------------------------------+
+ openstack endpoint create --region RegionOne compute internal 'http://controller:8774/v2.1/%(tenant_id)s'
+--------------+-------------------------------------------+
| Field        | Value                                     |
+--------------+-------------------------------------------+
| enabled      | True                                      |
| id           | a9584c5c92054c4d8c8293484f96859f          |
| interface    | internal                                  |
| region       | RegionOne                                 |
| region_id    | RegionOne                                 |
| service_id   | 839bd6344c9b4ae08e163b9485bfeac2          |
| service_name | nova                                      |
| service_type | compute                                   |
| url          | http://controller:8774/v2.1/%(tenant_id)s |
+--------------+-------------------------------------------+
+ openstack endpoint create --region RegionOne compute admin 'http://controller:8774/v2.1/%(tenant_id)s'
+--------------+-------------------------------------------+
| Field        | Value                                     |
+--------------+-------------------------------------------+
| enabled      | True                                      |
| id           | 201e8aac44c2411cac03a18c16f3e7c7          |
| interface    | admin                                     |
| region       | RegionOne                                 |
| region_id    | RegionOne                                 |
| service_id   | 839bd6344c9b4ae08e163b9485bfeac2          |
| service_name | nova                                      |
| service_type | compute                                   |
| url          | http://controller:8774/v2.1/%(tenant_id)s |
+--------------+-------------------------------------------+
+ yum install -y openstack-nova-api openstack-nova-conductor openstack-nova-console openstack-nova-novncproxy openstack-nova-scheduler
Loaded plugins: fastestmirror, priorities
Loading mirror speeds from cached hostfile
 * base: centos.sonn.com
 * extras: mirror.sesp.northwestern.edu
 * updates: centos.host-engine.com
424 packages excluded due to repository priority protections
Resolving Dependencies
--> Running transaction check
---> Package openstack-nova-api.noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos will be installed
--> Processing Dependency: openstack-nova-common = 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos for package: 1:openstack-nova-api-13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos.noarch
---> Package openstack-nova-conductor.noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos will be installed
---> Package openstack-nova-console.noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos will be installed
--> Processing Dependency: python-websockify for package: 1:openstack-nova-console-13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos.noarch
---> Package openstack-nova-novncproxy.noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos will be installed
--> Processing Dependency: novnc for package: 1:openstack-nova-novncproxy-13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos.noarch
---> Package openstack-nova-scheduler.noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos will be installed
--> Running transaction check
---> Package novnc.noarch 0:0.5.1-2.el7 will be installed
---> Package openstack-nova-common.noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos will be installed
--> Processing Dependency: python-nova = 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos for package: 1:openstack-nova-common-13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos.noarch
---> Package python-websockify.noarch 0:0.6.0-2.el7 will be installed
--> Running transaction check
---> Package python-nova.noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos will be installed
--> Processing Dependency: python-oslo-versionedobjects >= 1.4.0 for package: 1:python-nova-13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos.noarch
--> Processing Dependency: python-oslo-reports >= 0.6.0 for package: 1:python-nova-13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos.noarch
--> Processing Dependency: python-rfc3986 for package: 1:python-nova-13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos.noarch
--> Processing Dependency: python-psutil for package: 1:python-nova-13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos.noarch
--> Processing Dependency: python-paramiko for package: 1:python-nova-13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos.noarch
--> Processing Dependency: python-os-brick for package: 1:python-nova-13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos.noarch
--> Processing Dependency: python-lxml for package: 1:python-nova-13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos.noarch
--> Processing Dependency: python-cheetah for package: 1:python-nova-13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos.noarch
--> Running transaction check
---> Package python-cheetah.x86_64 0:2.4.4-5.el7.centos will be installed
--> Processing Dependency: python-pygments for package: python-cheetah-2.4.4-5.el7.centos.x86_64
--> Processing Dependency: python-markdown for package: python-cheetah-2.4.4-5.el7.centos.x86_64
---> Package python-lxml.x86_64 0:3.2.1-4.el7 will be installed
--> Processing Dependency: libxslt.so.1(LIBXML2_1.1.9)(64bit) for package: python-lxml-3.2.1-4.el7.x86_64
--> Processing Dependency: libxslt.so.1(LIBXML2_1.1.26)(64bit) for package: python-lxml-3.2.1-4.el7.x86_64
--> Processing Dependency: libxslt.so.1(LIBXML2_1.1.2)(64bit) for package: python-lxml-3.2.1-4.el7.x86_64
--> Processing Dependency: libxslt.so.1(LIBXML2_1.0.24)(64bit) for package: python-lxml-3.2.1-4.el7.x86_64
--> Processing Dependency: libxslt.so.1(LIBXML2_1.0.22)(64bit) for package: python-lxml-3.2.1-4.el7.x86_64
--> Processing Dependency: libxslt.so.1(LIBXML2_1.0.18)(64bit) for package: python-lxml-3.2.1-4.el7.x86_64
--> Processing Dependency: libxslt.so.1(LIBXML2_1.0.11)(64bit) for package: python-lxml-3.2.1-4.el7.x86_64
--> Processing Dependency: libxslt.so.1()(64bit) for package: python-lxml-3.2.1-4.el7.x86_64
--> Processing Dependency: libexslt.so.0()(64bit) for package: python-lxml-3.2.1-4.el7.x86_64
---> Package python-paramiko.noarch 0:1.15.1-1.el7 will be installed
--> Processing Dependency: python-ecdsa for package: python-paramiko-1.15.1-1.el7.noarch
---> Package python-psutil.x86_64 0:1.2.1-1.el7 will be installed
---> Package python-rfc3986.noarch 0:0.2.0-1.el7 will be installed
---> Package python2-os-brick.noarch 0:1.1.1-0.20160303100740.cdc2531.el7.centos will be installed
---> Package python2-oslo-reports.noarch 0:1.6.1-0.20160226065613.da70fe7.el7.centos will be installed
---> Package python2-oslo-versionedobjects.noarch 0:1.7.1-0.20160303144806.c459d5e.el7.centos will be installed
--> Processing Dependency: python-mock for package: python2-oslo-versionedobjects-1.7.1-0.20160303144806.c459d5e.el7.centos.noarch
--> Running transaction check
---> Package libxslt.x86_64 0:1.1.28-5.el7 will be installed
---> Package python-ecdsa.noarch 0:0.11-3.el7 will be installed
---> Package python-markdown.noarch 0:2.4.1-1.el7.centos will be installed
---> Package python-pygments.noarch 0:2.0.2-4.el7 will be installed
--> Processing Dependency: python-imaging for package: python-pygments-2.0.2-4.el7.noarch
---> Package python2-mock.noarch 0:1.3.0-1.el7 will be installed
--> Running transaction check
---> Package python-pillow.x86_64 0:2.0.0-19.gitd1c6db8.el7 will be installed
--> Processing Dependency: libtiff.so.5(LIBTIFF_4.0)(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
--> Processing Dependency: libjpeg.so.62(LIBJPEG_6.2)(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
--> Processing Dependency: libwebp.so.4()(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
--> Processing Dependency: libtiff.so.5()(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
--> Processing Dependency: libjpeg.so.62()(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
--> Running transaction check
---> Package libjpeg-turbo.x86_64 0:1.2.90-5.el7 will be installed
---> Package libtiff.x86_64 0:4.0.3-14.el7 will be installed
--> Processing Dependency: libjbig.so.2.0()(64bit) for package: libtiff-4.0.3-14.el7.x86_64
---> Package libwebp.x86_64 0:0.3.0-3.el7 will be installed
--> Running transaction check
---> Package jbigkit-libs.x86_64 0:2.0-11.el7 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package                    Arch   Version        Repository               Size
================================================================================
Installing:
 openstack-nova-api         noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos
                                                  delorean                5.5 k
 openstack-nova-conductor   noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos
                                                  delorean                4.1 k
 openstack-nova-console     noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos
                                                  delorean                5.1 k
 openstack-nova-novncproxy  noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos
                                                  delorean                4.6 k
 openstack-nova-scheduler   noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos
                                                  delorean                4.1 k
Installing for dependencies:
 jbigkit-libs               x86_64 2.0-11.el7     base                     46 k
 libjpeg-turbo              x86_64 1.2.90-5.el7   base                    134 k
 libtiff                    x86_64 4.0.3-14.el7   base                    167 k
 libwebp                    x86_64 0.3.0-3.el7    base                    170 k
 libxslt                    x86_64 1.1.28-5.el7   base                    242 k
 novnc                      noarch 0.5.1-2.el7    delorean-mitaka-testing 175 k
 openstack-nova-common      noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos
                                                  delorean                 79 k
 python-cheetah             x86_64 2.4.4-5.el7.centos
                                                  extras                  341 k
 python-ecdsa               noarch 0.11-3.el7     delorean-mitaka-testing  68 k
 python-lxml                x86_64 3.2.1-4.el7    base                    758 k
 python-markdown            noarch 2.4.1-1.el7.centos
                                                  extras                  186 k
 python-nova                noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos
                                                  delorean                2.9 M
 python-paramiko            noarch 1.15.1-1.el7   delorean-mitaka-testing 998 k
 python-pillow              x86_64 2.0.0-19.gitd1c6db8.el7
                                                  base                    438 k
 python-psutil              x86_64 1.2.1-1.el7    delorean-mitaka-testing 106 k
 python-pygments            noarch 2.0.2-4.el7    delorean-mitaka-testing 1.6 M
 python-rfc3986             noarch 0.2.0-1.el7    delorean-mitaka-testing  19 k
 python-websockify          noarch 0.6.0-2.el7    delorean-mitaka-testing  61 k
 python2-mock               noarch 1.3.0-1.el7    delorean-mitaka-testing 123 k
 python2-os-brick           noarch 1.1.1-0.20160303100740.cdc2531.el7.centos
                                                  delorean                257 k
 python2-oslo-reports       noarch 1.6.1-0.20160226065613.da70fe7.el7.centos
                                                  delorean                 50 k
 python2-oslo-versionedobjects
                            noarch 1.7.1-0.20160303144806.c459d5e.el7.centos
                                                  delorean                 68 k

Transaction Summary
================================================================================
Install  5 Packages (+22 Dependent packages)

Total download size: 8.8 M
Installed size: 36 M
Downloading packages:
--------------------------------------------------------------------------------
Total                                              1.7 MB/s | 8.8 MB  00:05     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : python-websockify-0.6.0-2.el7.noarch                        1/27 
  Installing : libjpeg-turbo-1.2.90-5.el7.x86_64                           2/27 
  Installing : python-psutil-1.2.1-1.el7.x86_64                            3/27 
  Installing : python2-oslo-reports-1.6.1-0.20160226065613.da70fe7.el7.    4/27 
  Installing : novnc-0.5.1-2.el7.noarch                                    5/27 
  Installing : libwebp-0.3.0-3.el7.x86_64                                  6/27 
  Installing : python2-mock-1.3.0-1.el7.noarch                             7/27 
  Installing : python2-oslo-versionedobjects-1.7.1-0.20160303144806.c45    8/27 
  Installing : python2-os-brick-1.1.1-0.20160303100740.cdc2531.el7.cent    9/27 
  Installing : libxslt-1.1.28-5.el7.x86_64                                10/27 
  Installing : python-lxml-3.2.1-4.el7.x86_64                             11/27 
  Installing : python-markdown-2.4.1-1.el7.centos.noarch                  12/27 
  Installing : python-rfc3986-0.2.0-1.el7.noarch                          13/27 
  Installing : python-ecdsa-0.11-3.el7.noarch                             14/27 
  Installing : python-paramiko-1.15.1-1.el7.noarch                        15/27 
  Installing : jbigkit-libs-2.0-11.el7.x86_64                             16/27 
  Installing : libtiff-4.0.3-14.el7.x86_64                                17/27 
  Installing : python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64               18/27 
  Installing : python-pygments-2.0.2-4.el7.noarch                         19/27 
  Installing : python-cheetah-2.4.4-5.el7.centos.x86_64                   20/27 
  Installing : 1:python-nova-13.0.0.0b4-0.20160304162843.c5a45a2.el7.ce   21/27 
  Installing : 1:openstack-nova-common-13.0.0.0b4-0.20160304162843.c5a4   22/27 
  Installing : 1:openstack-nova-api-13.0.0.0b4-0.20160304162843.c5a45a2   23/27 
  Installing : 1:openstack-nova-console-13.0.0.0b4-0.20160304162843.c5a   24/27 
  Installing : 1:openstack-nova-scheduler-13.0.0.0b4-0.20160304162843.c   25/27 
  Installing : 1:openstack-nova-novncproxy-13.0.0.0b4-0.20160304162843.   26/27 
  Installing : 1:openstack-nova-conductor-13.0.0.0b4-0.20160304162843.c   27/27 
  Verifying  : 1:openstack-nova-common-13.0.0.0b4-0.20160304162843.c5a4    1/27 
  Verifying  : python-websockify-0.6.0-2.el7.noarch                        2/27 
  Verifying  : python-lxml-3.2.1-4.el7.x86_64                              3/27 
  Verifying  : python-psutil-1.2.1-1.el7.x86_64                            4/27 
  Verifying  : libtiff-4.0.3-14.el7.x86_64                                 5/27 
  Verifying  : jbigkit-libs-2.0-11.el7.x86_64                              6/27 
  Verifying  : 1:openstack-nova-api-13.0.0.0b4-0.20160304162843.c5a45a2    7/27 
  Verifying  : python-cheetah-2.4.4-5.el7.centos.x86_64                    8/27 
  Verifying  : 1:openstack-nova-console-13.0.0.0b4-0.20160304162843.c5a    9/27 
  Verifying  : python-ecdsa-0.11-3.el7.noarch                             10/27 
  Verifying  : libjpeg-turbo-1.2.90-5.el7.x86_64                          11/27 
  Verifying  : python-rfc3986-0.2.0-1.el7.noarch                          12/27 
  Verifying  : 1:openstack-nova-scheduler-13.0.0.0b4-0.20160304162843.c   13/27 
  Verifying  : python-markdown-2.4.1-1.el7.centos.noarch                  14/27 
  Verifying  : python-pygments-2.0.2-4.el7.noarch                         15/27 
  Verifying  : libxslt-1.1.28-5.el7.x86_64                                16/27 
  Verifying  : python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64               17/27 
  Verifying  : novnc-0.5.1-2.el7.noarch                                   18/27 
  Verifying  : python2-os-brick-1.1.1-0.20160303100740.cdc2531.el7.cent   19/27 
  Verifying  : 1:openstack-nova-novncproxy-13.0.0.0b4-0.20160304162843.   20/27 
  Verifying  : 1:python-nova-13.0.0.0b4-0.20160304162843.c5a45a2.el7.ce   21/27 
  Verifying  : 1:openstack-nova-conductor-13.0.0.0b4-0.20160304162843.c   22/27 
  Verifying  : python2-mock-1.3.0-1.el7.noarch                            23/27 
  Verifying  : python2-oslo-versionedobjects-1.7.1-0.20160303144806.c45   24/27 
  Verifying  : python2-oslo-reports-1.6.1-0.20160226065613.da70fe7.el7.   25/27 
  Verifying  : libwebp-0.3.0-3.el7.x86_64                                 26/27 
  Verifying  : python-paramiko-1.15.1-1.el7.noarch                        27/27 

Installed:
  openstack-nova-api.noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos    
  openstack-nova-conductor.noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos
  openstack-nova-console.noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos
  openstack-nova-novncproxy.noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos
  openstack-nova-scheduler.noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos

Dependency Installed:
  jbigkit-libs.x86_64 0:2.0-11.el7                                              
  libjpeg-turbo.x86_64 0:1.2.90-5.el7                                           
  libtiff.x86_64 0:4.0.3-14.el7                                                 
  libwebp.x86_64 0:0.3.0-3.el7                                                  
  libxslt.x86_64 0:1.1.28-5.el7                                                 
  novnc.noarch 0:0.5.1-2.el7                                                    
  openstack-nova-common.noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos 
  python-cheetah.x86_64 0:2.4.4-5.el7.centos                                    
  python-ecdsa.noarch 0:0.11-3.el7                                              
  python-lxml.x86_64 0:3.2.1-4.el7                                              
  python-markdown.noarch 0:2.4.1-1.el7.centos                                   
  python-nova.noarch 1:13.0.0.0b4-0.20160304162843.c5a45a2.el7.centos           
  python-paramiko.noarch 0:1.15.1-1.el7                                         
  python-pillow.x86_64 0:2.0.0-19.gitd1c6db8.el7                                
  python-psutil.x86_64 0:1.2.1-1.el7                                            
  python-pygments.noarch 0:2.0.2-4.el7                                          
  python-rfc3986.noarch 0:0.2.0-1.el7                                           
  python-websockify.noarch 0:0.6.0-2.el7                                        
  python2-mock.noarch 0:1.3.0-1.el7                                             
  python2-os-brick.noarch 0:1.1.1-0.20160303100740.cdc2531.el7.centos           
  python2-oslo-reports.noarch 0:1.6.1-0.20160226065613.da70fe7.el7.centos       
  python2-oslo-versionedobjects.noarch 0:1.7.1-0.20160303144806.c459d5e.el7.centos

Complete!
+ openstack-config --set /etc/nova/nova.conf DEFAULT enabled_apis osapi_compute,metadata
+ openstack-config --set /etc/nova/nova.conf DEFAULT rpc_backend rabbit
+ openstack-config --set /etc/nova/nova.conf DEFAULT auth_strategy keystone
+ openstack-config --set /etc/nova/nova.conf DEFAULT my_ip 10.0.0.11
+ openstack-config --set /etc/nova/nova.conf DEFAULT use_neutron True
+ openstack-config --set /etc/nova/nova.conf DEFAULT firewall_driver nova.virt.firewall.NoopFirewallDriver
+ openstack-config --set /etc/nova/nova.conf api_database connection mysql+pymysql://nova:Super123@controller/nova_api
+ openstack-config --set /etc/nova/nova.conf database connection mysql+pymysql://nova:Super123@controller/nova
+ openstack-config --set /etc/nova/nova.conf oslo_messaging_rabbit rabbit_host controller
+ openstack-config --set /etc/nova/nova.conf oslo_messaging_rabbit rabbit_userid openstack
+ openstack-config --set /etc/nova/nova.conf oslo_messaging_rabbit rabbit_password Super123
+ openstack-config --set /etc/nova/nova.conf keystone_authtoken auth_uri http://controller:5000
+ openstack-config --set /etc/nova/nova.conf keystone_authtoken auth_url http://controller:35357
+ openstack-config --set /etc/nova/nova.conf keystone_authtoken memcached_servers controller:11211
+ openstack-config --set /etc/nova/nova.conf keystone_authtoken auth_type password
+ openstack-config --set /etc/nova/nova.conf keystone_authtoken project_domain_name default
+ openstack-config --set /etc/nova/nova.conf keystone_authtoken user_domain_name default
+ openstack-config --set /etc/nova/nova.conf keystone_authtoken project_name service
+ openstack-config --set /etc/nova/nova.conf keystone_authtoken username nova
+ openstack-config --set /etc/nova/nova.conf keystone_authtoken password Super123
+ openstack-config --set /etc/nova/nova.conf vnc vncserver_listen 10.0.0.11
+ openstack-config --set /etc/nova/nova.conf vnc vncserver_proxyclient_address 10.0.0.11
+ openstack-config --set /etc/nova/nova.conf glance api_servers http://controller:9292
+ openstack-config --set /etc/nova/nova.conf oslo_concurrency lock_path /var/lib/nova/tmp
+ su -s /bin/sh -c 'nova-manage api_db sync' nova
+ su -s /bin/sh -c 'nova-manage db sync' nova
/usr/lib/python2.7/site-packages/pymysql/cursors.py:146: Warning: Duplicate index 'block_device_mapping_instance_uuid_virtual_name_device_name_idx' defined on the table 'nova.block_device_mapping'. This is deprecated and will be disallowed in a future release.
  result = self._query(query)
/usr/lib/python2.7/site-packages/pymysql/cursors.py:146: Warning: Duplicate index 'uniq_instances0uuid' defined on the table 'nova.instances'. This is deprecated and will be disallowed in a future release.
  result = self._query(query)
+ systemctl enable openstack-nova-api.service openstack-nova-consoleauth.service openstack-nova-scheduler.service openstack-nova-conductor.service openstack-nova-novncproxy.service
Created symlink from /etc/systemd/system/multi-user.target.wants/openstack-nova-api.service to /usr/lib/systemd/system/openstack-nova-api.service.
Created symlink from /etc/systemd/system/multi-user.target.wants/openstack-nova-consoleauth.service to /usr/lib/systemd/system/openstack-nova-consoleauth.service.
Created symlink from /etc/systemd/system/multi-user.target.wants/openstack-nova-scheduler.service to /usr/lib/systemd/system/openstack-nova-scheduler.service.
Created symlink from /etc/systemd/system/multi-user.target.wants/openstack-nova-conductor.service to /usr/lib/systemd/system/openstack-nova-conductor.service.
Created symlink from /etc/systemd/system/multi-user.target.wants/openstack-nova-novncproxy.service to /usr/lib/systemd/system/openstack-nova-novncproxy.service.
+ systemctl start openstack-nova-api.service openstack-nova-consoleauth.service openstack-nova-scheduler.service openstack-nova-conductor.service openstack-nova-novncproxy.service
+ '[' '!' -f /root/.ssh/id_rsa ']'
+ echo 'start connection'
start connection
+ mkdir /root/.ssh
+ chmod 700 /root/.ssh
+ ssh-keygen -f id_rsa -t rsa -N ''
Generating public/private rsa key pair.
Your identification has been saved in id_rsa.
Your public key has been saved in id_rsa.pub.
The key fingerprint is:
22:13:d2:47:7b:3a:ef:af:cd:e4:fe:c3:55:04:dc:ed root@controller
The key's randomart image is:
+--[ RSA 2048]----+
|      .      ..o.|
|   . . .      . +|
|  . o o .      o |
|   . o o        E|
|    o + S      . |
|     o +      .  |
|        . .. .   |
|       . =  o    |
|        o+*...   |
+-----------------+
+ cp id_rsa id_rsa.pub /root/.ssh/
+ rm -f id_rsa id_rsa.pub
+ node_ip=10.0.0.31
+ ./ssh_key_auth.sh 10.0.0.31
spawn ssh-copy-id 10.0.0.31
The authenticity of host '10.0.0.31 (10.0.0.31)' can't be established.
ECDSA key fingerprint is 5c:42:52:88:42:c5:a1:b9:30:86:8a:6b:ba:9d:a6:df.
Are you sure you want to continue connecting (yes/no)? yes
/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed
/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys
root@10.0.0.31's password: 

Number of key(s) added: 1

Now try logging into the machine, with:   "ssh '10.0.0.31'"
and check to make sure that only the key(s) you wanted were added.

+ scp ssh_key_auth.sh compute_init.sh 'root@10.0.0.31:~'
+ '[' '!' -f /root/compute1_finished ']'
+ echo 'installing compute node'
installing compute node
+ sleep 10
+ ssh root@10.0.0.31 '~/compute_init.sh'
+ '[' '!' -f /root/compute1_finished ']'
+ echo 'installing compute node'
installing compute node
+ sleep 10
+ '[' '!' -f /root/compute1_finished ']'
+ echo 'installing compute node'
installing compute node
+ sleep 10
+ '[' '!' -f /root/compute1_finished ']'
+ echo 'installing compute node'
installing compute node
+ sleep 10
+ '[' '!' -f /root/compute1_finished ']'
+ echo 'installing compute node'
installing compute node
+ sleep 10
+ '[' '!' -f /root/compute1_finished ']'
+ echo 'installing compute node'
installing compute node
+ sleep 10
+ '[' '!' -f /root/compute1_finished ']'
+ . admin-openrc
++ export OS_PROJECT_DOMAIN_NAME=default
++ OS_PROJECT_DOMAIN_NAME=default
++ export OS_USER_DOMAIN_NAME=default
++ OS_USER_DOMAIN_NAME=default
++ export OS_PROJECT_NAME=admin
++ OS_PROJECT_NAME=admin
++ export OS_USERNAME=admin
++ OS_USERNAME=admin
++ export OS_PASSWORD=Super123
++ OS_PASSWORD=Super123
++ export OS_AUTH_URL=http://controller:35357/v3
++ OS_AUTH_URL=http://controller:35357/v3
++ export OS_IDENTITY_API_VERSION=3
++ OS_IDENTITY_API_VERSION=3
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
+ openstack compute service list
+----+------------------+------------+----------+---------+-------+----------------------------+
| Id | Binary           | Host       | Zone     | Status  | State | Updated At                 |
+----+------------------+------------+----------+---------+-------+----------------------------+
|  1 | nova-scheduler   | controller | internal | enabled | up    | 2016-05-01T09:27:44.000000 |
|  2 | nova-conductor   | controller | internal | enabled | up    | 2016-05-01T09:27:44.000000 |
|  3 | nova-consoleauth | controller | internal | enabled | up    | 2016-05-01T09:27:44.000000 |
|  6 | nova-compute     | compute1   | nova     | enabled | up    | None                       |
+----+------------------+------------+----------+---------+-------+----------------------------+
+ exit 0
